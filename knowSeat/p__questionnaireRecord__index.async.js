"use strict";(self.webpackChunksub_know_seat=self.webpackChunksub_know_seat||[]).push([[728],{53500:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(17662),r=n.n(a),c=n(35118),u=n.n(c),o=n(31404),i=n.n(o),l=n(17925),s=n.n(l),d=(n(23279),n(16769),n(80348),n(25506),n(8532),n(6889)),f=n(82405),h=n(27778),m=n(62365),v=n(14748),p=n(978),x=n(73287),k="questionnaireRecord___PPoRQ",_=n(1164),g=n(84384),w=n(84871),I=n(55375),Z=n(50107),j="TsIu",y=function(){var e,t,n=(0,p.useRef)(),a=(0,p.useRef)(null),c=(0,p.useState)(!1),o=s()(c,2),l=o[0],y=o[1],S=(0,p.useState)(null),b=s()(S,2),P=b[0],N=b[1],T=(0,p.useState)(null),C=s()(T,2),R=C[0],E=C[1],H=(0,p.useState)(!1),q=s()(H,2),z=q[0],A=q[1],M=(0,p.useState)([]),W=s()(M,2),$=W[0],B=W[1],D=(0,p.useState)(!1),F=s()(D,2),O=F[0],Q=F[1],G=[{width:240,dataIndex:"surveyName",title:"问卷调查名称"},{width:100,dataIndex:"fundAccountId",title:"基金账号"},{width:80,dataIndex:"customerName",title:"客户姓名",filters:$,filterMultiple:!1,filterSearch:function(e,t){return K(e,t)}},{width:100,dataIndex:"createTime",title:"填写时间",sorter:!0,render:function(e){return(0,Z.jsx)("div",{_nk:"".concat(j,"11"),children:0!=e?(0,w.lv)(e):"-"})}},{width:90,dataIndex:"operator",title:"坐席提交人员"},{dataIndex:"option",width:70,title:"操作",render:function(e,t,n){return(0,Z.jsx)("div",{className:"table-btns",_nk:"".concat(j,"12"),children:(0,Z.jsx)(d.Z,{type:"link",className:"ant-btn",onClick:function(){return J(t)},_nk:"".concat(j,"21"),children:"修改"})})}}],J=function(e){E(e),A(!0)};(0,p.useEffect)((function(){(0,_.TP)().then((function(e){var t=[];null==e||e.data.forEach((function(e){var n={value:e.customerId,text:e.customerName};t.push(n)})),B(t)})).catch((function(){f.ZP.error("服务异常")}))}),[]);var K=function(e,t){var n=[],a=[];return null==t||t.map((function(e){var t={};t.text=e.title,t.value=e.key,n.push(t)})),0==e.length?n:(null==n||n.map((function(t){(t.value.includes(e)||t.text.includes(e))&&a.push(t)})),a)},L=function(){var e=i()(r()().mark((function e(t){var n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u()({},t),t.createTime&&(n.order="ascend"===t.createTime?"asc":"desc",delete n.createTime),t.customerName&&(n.customerId=t.customerName,delete n.customerName),(0,_.m$)(u()({},n)).then((function(e){"0000"===(null==e?void 0:e.code)?N((null==e?void 0:e.data)||{list:[],count:0}):f.ZP.error((null==e?void 0:e.message)||"服务异常"),y(!1)})).catch((function(){f.ZP.error("服务异常"),y(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){1==O&&(y(!0),(0,_.m$)({page:1,pageSize:10}).then((function(e){"0000"===(null==e?void 0:e.code)?N((null==e?void 0:e.data)||{list:[],count:0}):f.ZP.error((null==e?void 0:e.message)||"服务异常"),y(!1)})).catch((function(){f.ZP.error("服务异常"),y(!1)})),Q(!1))}),[O]);var U=void 0===I.o.yx?"calc(100vh - 110px)":"100vh",V=(null===(e=a.current)||void 0===e?void 0:e.offsetHeight)||360,X=null===(t=a.current)||void 0===t?void 0:t.querySelector(".table-header-box"),Y=null!=X&&X.offsetHeight?null==X?void 0:X.offsetHeight:0;return(0,Z.jsxs)(h.ZP,{autoInsertSpaceInButton:!1,_nk:"".concat(j,"31"),children:[(0,Z.jsx)("div",{ref:a,className:k,style:{height:U},_nk:"".concat(j,"13"),children:(0,Z.jsx)(x.Z,{ref:n,columns:G,loading:l,total:(null==P?void 0:P.count)||0,dataSource:(null==P?void 0:P.list)||[],getData:function(e){return L(e)},formChildren:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Z.Item,{label:"问卷调查名称",name:"keyword",_nk:"".concat(j,"51"),children:(0,Z.jsx)(v.Z,{placeholder:"请输入",style:{minWidth:240,width:240},_nk:"".concat(j,"61")})}),(0,Z.jsx)(m.Z.Item,{label:"基金账号",name:"fundAccountId",_nk:"".concat(j,"52"),children:(0,Z.jsx)(v.Z,{placeholder:"请输入",style:{minWidth:240,width:240},_nk:"".concat(j,"62")})})]}),paginationMap:{current:"page"},scroll:{x:1300,y:V-Y-168},_nk:"".concat(j,"41")})}),(0,Z.jsx)(g.Z,{previewReleaseOpen:z,customerInfo:R,handleCancel:function(e){A(e)},refresh:function(e){var t;Q(e),null===(t=n.current)||void 0===t||t.setPaginationParams({current:1,pageSize:10})},type:"edit",_nk:"".concat(j,"71")})]})}}}]);