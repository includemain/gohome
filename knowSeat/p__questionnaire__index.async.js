"use strict";(self.webpackChunksub_know_seat=self.webpackChunksub_know_seat||[]).push([[417],{31212:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var i=t(17662),a=t.n(i),c=t(31404),o=t.n(c),l=t(35118),s=t.n(l),r=t(17925),u=t.n(r),d=t(4143),m=t.n(d),v=(t(8186),t(23279),t(16769),t(48239),t(80348),t(25506),t(82405)),p=t(81884),h=t(6889),f=t(27778),A=t(62365),x=t(14748),k=t(22944),g=t(978),j=t(73287),y=t(57065),N=t.n(y),C="questionnaire___tbO9o",b="modalLose___C31A4",w=t(55375),q=t(1164),S=t(4044),_=t.n(S),Z=t(23469),O=t.n(Z),E=(t(68046),t(71219),t(63669),t(68900),t(96751),t(8532),t(48493)),F=t(2344),R=t(99819),V=t(28068),P=t(34738),I=t(89444),D=[{value:"single",label:"单选题"},{value:"multiple",label:"多选题"},{value:"fill",label:"填空题"}],M=[{name:"A"},{name:"B"},{name:"C"},{name:"D"},{name:"E"},{name:"F"},{name:"G"},{name:"H"},{name:"I"},{name:"J"}],U=["A","B","C","D","E","F","G","H","I","J"],B=t(50107),G=(E.Z.RangePicker,x.Z.TextArea),Q="1SSG",Y=function(e){var n=A.Z.useForm(),i=u()(n,1)[0],a=e.modalOpenDetail,c=e.handleCancel,o=e.modalType,l=e.rowRecords,r=e.refresh,d=(0,g.useState)(""),p=u()(d,2),h=p[0],f=p[1],j=(0,g.useState)([!0]),y=u()(j,2),N=y[0],C=y[1],b=(0,g.useState)([""]),w=u()(b,2),S=w[0],Z=w[1],E=[{name:"A",description:"",enableFilling:!1},{name:"B",description:"",enableFilling:!1}],Y=(0,g.useState)([{options:E,type:"single",content:"",maxSelectedOptionCount:2,required:""}]),T=u()(Y,2),K=T[0],H=T[1],J=[{description:"",enableFilling:!1},{description:"",enableFilling:!1}],X=(0,g.useState)([]),z=u()(X,2),W=z[0],L=z[1],$=function(){N.push(!1),S.push(""),Z(_()(S)),K.push({content:"",maxSelectedOptionCount:2,required:"",type:"single",options:[{name:"A",description:"",enableFilling:!1},{name:"B",description:"",enableFilling:!1}]}),H(_()(K));var e={type:"single",content:"",maxSelectedOptionCount:"",required:!1,options:J};W.push(e),L(_()(W))};(0,g.useEffect)((function(){if(a)if(1==o){var e=[{type:"single",content:"",maxSelectedOptionCount:"",required:!1,options:J}];f(""),i.setFieldValue("surveyName",""),i.setFieldValue("content0",""),i.setFieldValue("maxSelectedOptionCount0",2),i.setFieldValue("required0",""),L([].concat(e)),H([].concat([{options:E,type:"single",content:"",maxSelectedOptionCount:2,required:""}])),C([!0])}else if(2==o||3==o){var n;i.setFieldValue("surveyName",null==l?void 0:l.surveyName),null==l||null===(n=l.questionViews)||void 0===n||n.forEach((function(e,n){var t,a,c;i.setFieldValue("content".concat(n),null==l||null===(t=l.questionViews)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.content),i.setFieldValue("maxSelectedOptionCount".concat(n),null==l||null===(a=l.questionViews)||void 0===a||null===(a=a[n])||void 0===a?void 0:a.maxSelectedOptionCount),i.setFieldValue("required".concat(n),null==l||null===(c=l.questionViews)||void 0===c||null===(c=c[n])||void 0===c?void 0:c.required)})),f(null==l?void 0:l.surveyName);var t=JSON.parse(JSON.stringify(null==l?void 0:l.questionViews));null==t||t.forEach((function(e){var n;null==e||null===(n=e.options)||void 0===n||n.forEach((function(e,n){e.name=U[n]}))}));var c=JSON.parse(JSON.stringify(null==l?void 0:l.questionViews));H(_()(t)),L(_()(c)),C([!0])}}),[a]);var ee=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;ne(e,n,t)},ne=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;if("top"===e){var a=O()(n[t-1]);n[t-1]=O()(n[t]),n[t]=a,H(_()(n));var c=O()(W[t-1]);W[t-1]=O()(W[t]),W[t]=c,L(_()(W)),i.setFieldsValue(m()(m()(m()({},"content".concat(t),n[t].content),"maxSelectedOptionCount".concat(t),n[t].maxSelectedOptionCount),"required".concat(t),n[t].required)),i.setFieldsValue(m()(m()(m()({},"content".concat(t-1),n[t-1].content),"maxSelectedOptionCount".concat(t-1),n[t-1].maxSelectedOptionCount),"required".concat(t-1),n[t-1].required)),v.ZP.success("上移成功")}if("buttom"===e){var o=O()(n[t+1]);n[t+1]=O()(n[t]),n[t]=o,H(_()(n));var l=O()(W[t+1]);W[t+1]=O()(W[t]),W[t]=l,L(_()(W)),i.setFieldsValue(m()(m()(m()({},"content".concat(t),n[t].content),"maxSelectedOptionCount".concat(t),n[t].maxSelectedOptionCount),"required".concat(t),n[t].required)),i.setFieldsValue(m()(m()(m()({},"content".concat(t+1),n[t+1].content),"maxSelectedOptionCount".concat(t+1),n[t+1].maxSelectedOptionCount),"required".concat(t+1),n[t+1].required)),v.ZP.success("下移成功")}"copy"===e&&(n.push(O()(n[t])),W.push(O()(W[t])),delete n[n.length-1].questionId,delete W[W.length-1].questionId,H(_()(n)),L(_()(W)),v.ZP.success("复制成功")),"delete"===e&&(n.splice(t,1),H(_()(n)),W.splice(t,1),L(_()(W)),v.ZP.success("删除成功"))};return(0,B.jsx)("div",{className:"question-detail",_nk:"".concat(Q,"11"),children:(0,B.jsx)(k.Z,{title:1==o?"新建问卷":2==o?"复制问卷":"编辑问卷",visible:a,onCancel:function(){var e;null==l||null===(e=l.questionViews)||void 0===e||e.forEach((function(e,n){i.setFieldValue("content".concat(n),""),i.setFieldValue("maxSelectedOptionCount".concat(n),""),i.setFieldValue("required".concat(n),"")})),c(!1)},destroyOnClose:!0,onOk:function(){var e=!1;K.forEach((function(n){n.options.forEach((function(n){n.description.length>500&&(e=!0)}))})),1!=e&&i.validateFields().then((function(){var e={surveyName:h,questions:W};if(2==o||1==o)(0,q.nX)(s()({},e)).then((function(e){if("0000"==(null==e?void 0:e.code)){if(r(!0),1==o)v.ZP.success("新建成功");else if(2==o){var n;v.ZP.success("复制成功"),null==l||null===(n=l.questionViews)||void 0===n||n.forEach((function(e,n){i.setFieldValue("content".concat(n),""),i.setFieldValue("maxSelectedOptionCount".concat(n),""),i.setFieldValue("required".concat(n),"")}))}c(!1)}})).catch((function(){v.ZP.error("服务异常")}));else{var n={surveyName:h,questions:W,surveyId:null==l?void 0:l.surveyId};(0,q.Vx)(s()({},n)).then((function(e){var n;"0000"==(null==e?void 0:e.code)&&(null==l||null===(n=l.questionViews)||void 0===n||n.forEach((function(e,n){i.setFieldValue("content".concat(n),""),i.setFieldValue("maxSelectedOptionCount".concat(n),""),i.setFieldValue("required".concat(n),"")})),r(!0),v.ZP.success("编辑成功"),c(!1))})).catch((function(){v.ZP.error("服务异常")}))}}))},width:700,className:"modal-table-detail question-detail-modal",height:768,_nk:"".concat(Q,"21"),children:(0,B.jsxs)("div",{className:"modal-table-detail-body",_nk:"".concat(Q,"12"),children:[(0,B.jsx)(A.Z,{className:"form-edit",form:i,initialValues:{surveyName:h},_nk:"".concat(Q,"31"),children:(0,B.jsx)(A.Z.Item,{label:"问卷调查名称",name:"surveyName",className:"form-info-item",rules:[{required:!0,max:30,message:"问卷调查名称最多30个字"},{pattern:/^[^\s]*$/,message:"禁止输入空格"}],_nk:"".concat(Q,"41"),children:(0,B.jsx)(x.Z,{style:{width:360,borderRadius:8},defaultValue:h,value:h,onChange:function(e){f(e.target.value)},_nk:"".concat(Q,"51")})})}),(0,B.jsxs)("div",{className:"question-detail-right",_nk:"".concat(Q,"13"),children:[(0,B.jsx)("div",{className:"title",_nk:"".concat(Q,"14"),children:"题目设置"}),(0,B.jsx)("div",{className:"question-detail-right-body",_nk:"".concat(Q,"15"),children:null==K?void 0:K.map((function(e,n){var a;return(0,B.jsxs)("div",{className:"question",_nk:"".concat(Q,"16"),children:[(0,B.jsxs)("div",{className:"question-header",_nk:"".concat(Q,"17"),children:[(0,B.jsx)("img",{src:t(N[n]?70920:10402),onClick:function(){return(t=N)[e=n]=!t[e],void C(_()(t));var e,t},_nk:"".concat(Q,"61")}),(0,B.jsx)("span",{className:"question-header-title",_nk:"".concat(Q,"71"),children:"题目".concat(n+1)}),(0,B.jsx)(F.Z,{style:{width:160,borderRadius:4},value:e.type,options:D,onChange:function(e){return function(e,n){"multiple"==e?(W[n].maxSelectedOptionCount=2,S[n]=K[n].options.length,Z(_()(S))):W[n].maxSelectedOptionCount="","fill"==e&&(W[n].options=[]),W[n].type=e,K[n].type=e,L(W),H(_()(K))}(e,n)},_nk:"".concat(Q,"81")},n),(0,B.jsx)(R.Z,{overlayStyle:{width:80,borderRadius:12},trigger:"click",content:(0,B.jsxs)("div",{_nk:"".concat(Q,"18"),children:[0!==n?(0,B.jsx)("div",{className:"question-popover-move-title",style:{cursor:"pointer",width:47,textAlign:"center"},onClick:function(){return ee("top",K,n)},_nk:"".concat(Q,"19"),children:"上移"}):"",n!==K.length-1?(0,B.jsx)("div",{className:"question-popover-move-title",style:{cursor:"pointer",width:47,textAlign:"center"},onClick:function(){return ee("buttom",K,n)},_nk:"".concat(Q,"1a"),children:"下移"}):"",(0,B.jsx)("div",{className:"question-popover-move-title",style:{cursor:"pointer",width:47,textAlign:"center"},onClick:function(){return ee("copy",K,n)},_nk:"".concat(Q,"1b"),children:"复制"}),1!==K.length?(0,B.jsx)("div",{className:"question-popover-move-title",style:{cursor:"pointer",width:47,textAlign:"center"},onClick:function(){return ee("delete",K,n)},_nk:"".concat(Q,"1c"),children:"删除"}):""]}),_nk:"".concat(Q,"91"),children:(0,B.jsxs)("span",{className:"question-header-operate",_nk:"".concat(Q,"72"),children:[(0,B.jsx)("span",{className:"question-header-operate-point",_nk:"".concat(Q,"73")}),(0,B.jsx)("span",{className:"question-header-operate-point",_nk:"".concat(Q,"74")}),(0,B.jsx)("span",{className:"question-header-operate-point",_nk:"".concat(Q,"75")})]})})]}),N[n]?(0,B.jsxs)("div",{className:"question-body",_nk:"".concat(Q,"1d"),children:[(0,B.jsx)(A.Z,{className:"form-edit",form:i,initialValues:m()({},"content".concat(n),e.content),_nk:"".concat(Q,"32"),children:(0,B.jsx)(A.Z.Item,{label:"题目内容",name:"content".concat(n),className:"form-info-item",rules:[{required:!0,max:500,message:"题目内容最多500个字"},{pattern:/^[^\s]*$/,message:"禁止输入空格"}],_nk:"".concat(Q,"42"),children:(0,B.jsx)(G,{style:{width:548,borderRadius:8},rows:3,autoSize:{minRows:3,maxRows:3},value:e.content,onChange:function(e){return function(e,n){var t=W;t[n].content=e.target.value,L(t),K[n].content=e.target.value,H(_()(K))}(e,n)},_nk:"".concat(Q,"a1")},n)})}),"fill"!==e.type?(0,B.jsxs)("div",{_nk:"".concat(Q,"1e"),children:[null===(a=e.options)||void 0===a?void 0:a.map((function(t,i){return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"question-body-content",_nk:"".concat(Q,"1f"),children:[(0,B.jsx)("span",{className:"question-body-content-name",_nk:"".concat(Q,"76"),children:null==t?void 0:t.name}),(0,B.jsx)(x.Z,{style:{width:360,borderRadius:8,marginRight:16,borderColor:t.description.length>500?"#ff4d4f":""},value:t.description,onChange:function(e){return function(e,n,t){K[n].options[t].description=e.target.value,H(_()(K)),W[n].options[t].description=e.target.value,L(_()(W))}(e,n,i)},_nk:"".concat(Q,"52")},n+"-"+i),(0,B.jsx)(V.Z,{onChange:function(e){return function(e,n,t){K[n].options[t].enableFilling=e.target.checked,H(_()(K)),W[n].options[t].enableFilling=e.target.checked,L(_()(W))}(e,n,i)},checked:t.enableFilling,_nk:"".concat(Q,"b1"),children:"允许输入"}),e.options.length>2?(0,B.jsx)("span",{className:"question-body-content-delete",onClick:function(){return function(e,n){K[e].options.splice(n,1),K[e].options.forEach((function(e,n){e.name=U[n]})),H(_()(K)),W[e].options.splice(n,1),L(_()(W)),S[e]=K[e].options.length,Z(_()(S))}(n,i)},_nk:"".concat(Q,"77"),children:"删除"}):""]}),t.description.length>500?(0,B.jsx)("div",{className:"question-body-message",_nk:"".concat(Q,"1g"),children:"题目选项最多500个字"}):"",(0,B.jsx)("div",{_nk:"".concat(Q,"1h")})]})})),(0,B.jsxs)("div",{className:"question-body-add",onClick:function(){return t=K[e=n].options.length,i=s()(s()({},M[t]),{},{description:"",enableFilling:!1}),K[e].options.push(i),H(_()(K)),W[e].options.push({description:"",enableFilling:!1}),L(_()(W)),S[e]=K[e].options.length,void Z(_()(S));var e,t,i},_nk:"".concat(Q,"1i"),children:[(0,B.jsx)("img",{src:t(79878),_nk:"".concat(Q,"62")}),(0,B.jsx)("span",{className:"question-body-add-info",_nk:"".concat(Q,"78"),children:"添加选项"})]})]}):"",(0,B.jsx)("div",{_nk:"".concat(Q,"1j"),children:(0,B.jsxs)(A.Z,{className:"form-edit more-info",form:i,layout:"inline",initialValues:m()(m()({},"maxSelectedOptionCount".concat(n),e.maxSelectedOptionCount),"required".concat(n),e.required),_nk:"".concat(Q,"33"),children:["multiple"==e.type?(0,B.jsxs)(A.Z.Item,{label:"选项设置",name:"maxSelectedOptionCount".concat(n),className:"form-info-item",rules:[{required:!0}],_nk:"".concat(Q,"43"),children:[(0,B.jsx)("span",{className:"more-info-title",_nk:"".concat(Q,"79"),children:"最多可选"}),(0,B.jsx)(P.Z,{min:1,max:S[n],value:e.maxSelectedOptionCount,onChange:function(e){return function(e,n){W[n].maxSelectedOptionCount=e,K[n].maxSelectedOptionCount=e,L(_()(W))}(e,n)},style:{width:50,borderRadius:8},_nk:"".concat(Q,"c1")}),(0,B.jsx)("span",{className:"more-info-num",_nk:"".concat(Q,"7a"),children:"个选项"})]}):"",(0,B.jsx)(A.Z.Item,{label:"是否必填",name:"required".concat(n),className:"form-info-item",rules:[{required:!0}],_nk:"".concat(Q,"44"),children:(0,B.jsxs)(I.ZP.Group,{onChange:function(e){return function(e,n){W[n].required=e.target.value,K[n].required=e.target.value,L(_()(W))}(e,n)},value:e.required,_nk:"".concat(Q,"45"),children:[(0,B.jsx)(I.ZP,{value:!0,_nk:"".concat(Q,"d1"),children:"是"}),(0,B.jsx)(I.ZP,{value:!1,_nk:"".concat(Q,"d2"),children:"否"})]})})]})})]}):""]})}))}),(0,B.jsxs)("div",{className:"add-new-question",_nk:"".concat(Q,"1k"),children:[(0,B.jsx)("img",{className:"add-new-question-img",src:t(69968),onClick:$,_nk:"".concat(Q,"63")}),(0,B.jsx)("span",{className:"add-new-question-title",onClick:$,_nk:"".concat(Q,"7b"),children:"添加题目"})]}),(0,B.jsx)("div",{_nk:"".concat(Q,"1l")})]})]})})})},T=t(84384),K=t(90577),H=t.n(K),J="CtC0",X={single:"单选题",multiple:"多选题",fill:"填空题"},z=["#516ABA","#F25A5A","#33B0E6","#38C972","#516ABA","#F25A5A","#33B0E6","#38C972"],W=function(e){var n,t=e.viewItem;return(0,B.jsxs)("div",{className:"view-item",_nk:"".concat(J,"11"),children:[(0,B.jsxs)("div",{className:"view-title",_nk:"".concat(J,"12"),children:[t.index,".",(0,B.jsxs)("span",{className:"view-type",_nk:"".concat(J,"21"),children:["（",X[t.type],"）"]}),t.content]}),"fill"==t.type?(0,B.jsx)("div",{className:"invalld-type",style:{paddingLeft:12},_nk:"".concat(J,"13"),children:"填空题暂不支持统计"}):null===(n=t.optionStatistics)||void 0===n?void 0:n.map((function(e,n){return(0,B.jsxs)("div",{className:"container",_nk:"".concat(J,"14"),children:[(0,B.jsxs)("div",{className:"item-title",_nk:"".concat(J,"15"),children:[" ",U[n],". ",e.description]}),(0,B.jsxs)("div",{className:"item-contaner",_nk:"".concat(J,"16"),children:[(0,B.jsx)("div",{className:"item-echat",_nk:"".concat(J,"17"),children:(0,B.jsx)("div",{className:"item-gdp",style:{background:z[n],width:e.proportion+"%"},_nk:"".concat(J,"18")})}),(0,B.jsxs)("div",{className:"item-desc",_nk:"".concat(J,"19"),children:[e.selectCount,"（",e.proportion,"%）"]})]})]},n)}))]})},L=function(e){var n,t=e.visible,i=e.cancelModal,a=e.rowRecords,c=(0,g.useState)(),o=u()(c,2),l=o[0],r=o[1],d=null!=l&&l.startTime?H()(null==l?void 0:l.startTime).format("YYYY-MM-DD"):"-",m=null!=l&&l.endTime?H()(null==l?void 0:l.endTime).format("YYYY-MM-DD"):"-";return(0,g.useEffect)((function(){null!=a&&a.surveyId&&(0,q.x3)({surveyId:null==a?void 0:a.surveyId}).then((function(e){"0000"===(null==e?void 0:e.code)?r(null==e?void 0:e.data):v.ZP.error((null==e?void 0:e.message)||"服务异常")})).catch((function(e){v.ZP.error((null==e?void 0:e.message)||"服务异常")}))}),[a]),(0,B.jsx)(k.Z,{visible:t,getContainer:!1,width:600,footer:(0,B.jsx)(h.Z,{onClick:i,_nk:"".concat(J,"41"),children:"关闭"}),title:(null==a?void 0:a.surveyName)+" 调查问卷",onCancel:i,maskClosable:!0,className:"own-modal naira-modal naira-top-linear-img",_nk:"".concat(J,"31"),children:(0,B.jsxs)("div",{className:"view-statistics-body",_nk:"".concat(J,"1a"),children:[(0,B.jsxs)("div",{className:"view-header",_nk:"".concat(J,"1b"),children:[(0,B.jsxs)("div",{className:"view-desc",_nk:"".concat(J,"1c"),children:["填写人数：",(null==l?void 0:l.fillingCount)||"0"]}),(0,B.jsxs)("div",{className:"view-desc",style:{marginLeft:32},_nk:"".concat(J,"1d"),children:["调查时间段：",d,"至",m]})]}),(0,B.jsx)("div",{className:"view-scroll-body",_nk:"".concat(J,"1e"),children:null==l||null===(n=l.questionStatistics)||void 0===n?void 0:n.map((function(e,n){return(0,B.jsx)(W,{viewItem:s()({index:n+1},e),_nk:"".concat(J,"51")},n)}))})]})})},$="4fWy",ee=function(e){return e.unpublished="unpublished",e.publish="published",e.invalid="invalid",e}(ee||{}),ne=m()(m()(m()({},ee.unpublished,"未发布"),ee.publish,"已发布"),ee.invalid,"已失效"),te=m()(m()(m()({},ee.unpublished,"blue-color"),ee.publish,"green-color"),ee.invalid,"gray-color"),ie=function(){var e,n,i=(0,g.useRef)(),c=(0,g.useRef)(null),l=(0,g.useState)(!1),r=u()(l,2),d=r[0],m=r[1],y=(0,g.useState)(null),S=u()(y,2),_=S[0],Z=S[1],O=(0,g.useState)([]),E=u()(O,2),F=E[0],R=E[1],V=(0,g.useState)(!1),P=u()(V,2),I=P[0],D=P[1],M=(0,g.useState)(null),U=u()(M,2),G=U[0],Q=U[1],K=(0,g.useState)(null),H=u()(K,2),J=H[0],X=(H[1],(0,g.useState)(!1)),z=u()(X,2),W=z[0],ie=z[1],ae=(0,g.useState)(!1),ce=u()(ae,2),oe=ce[0],le=ce[1],se=(0,g.useState)(),re=u()(se,2),ue=re[0],de=re[1],me=(0,g.useState)(),ve=u()(me,2),pe=ve[0],he=ve[1],fe=(0,g.useState)(!1),Ae=u()(fe,2),xe=Ae[0],ke=Ae[1],ge=(0,g.useState)(),je=u()(ge,2),ye=je[0],Ne=je[1],Ce=(0,g.useState)(!1),be=u()(Ce,2),we=be[0],qe=be[1];(0,g.useEffect)((function(){(0,q.tY)().then((function(e){R((null==e?void 0:e.data)||[])}))}),[]);var Se=[{width:200,dataIndex:"surveyName",title:"问卷调查名称"},{width:80,dataIndex:"type",title:"问卷状态",filterMultiple:!1,filters:[{text:"未发布",value:"unpublished"},{text:"已发布",value:"published"},{text:"已失效",value:"invalid"}],render:function(e){return(0,B.jsx)("div",{className:te[e],_nk:"".concat($,"11"),children:ne[e]})}},{width:40,dataIndex:"count",title:"填写人数"},{width:60,dataIndex:"createUser",title:"创建人",filterMultiple:!1,filterSearch:function(e,n){var t;return e?null==F||null===(t=F.filter((function(n){var t,i;return(null===(t=n.username)||void 0===t?void 0:t.includes(e))||(null===(i=n.name)||void 0===i?void 0:i.includes(e))})))||void 0===t?void 0:t.map((function(e){return{label:e.name,text:e.name,value:e.username,nickName:e.username}})):[]},filters:[]},{width:100,dataIndex:"createTime",title:"创建时间",sorter:!0,render:function(e){return N()(e).format("YYYY-MM-DD HH:mm:ss")}},{width:100,dataIndex:"updateTime",title:"更新时间",sorter:!0,render:function(e){return N()(e).format("YYYY-MM-DD HH:mm:ss")}},{dataIndex:"option",width:77,title:"操作",render:function(e,n,t){return(0,B.jsx)("div",{className:"table-btns",_nk:"".concat($,"12"),children:(0,B.jsxs)(p.Z,{_nk:"".concat($,"21"),children:[n.type===ee.unpublished&&(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:function(){return function(e,n){Q(e),le(!0),de(n)}(n,t)},_nk:"".concat($,"31"),children:"预览发布"}),n.type===ee.unpublished&&(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:function(){return function(e){ie(!0),Q(e),he(3)}(n)},_nk:"".concat($,"32"),children:"编辑"}),n.type!==ee.unpublished&&(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(n),D(!0);case 2:case"end":return e.stop()}}),e)}))),_nk:"".concat($,"33"),children:"查看统计"}),n.type!==ee.unpublished&&(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,q.uE)({surveyId:n.surveyId}).then((function(e){v.ZP.success("导出成功")})).catch((function(){v.ZP.error("服务异常")}));case 1:case"end":return e.stop()}}),e)}))),_nk:"".concat($,"34"),children:"导出"}),(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:function(){return function(e){ie(!0),Q(e),he(2)}(n)},_nk:"".concat($,"35"),children:"复制"}),n.type===ee.publish&&(0,B.jsx)(h.Z,{type:"link",className:"ant-btn",onClick:function(){return function(e){ke(!0),Ne(null==e?void 0:e.surveyId)}(n)},_nk:"".concat($,"36"),children:"失效"})]})})}}],_e=function(){var e=o()(a()().mark((function e(n){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!0),t=s()({},n),(n.createTime||n.updateTime)&&(t.sortField=n.createTime?"create_time":"update_time",t.orderType="ascend"===n.createTime||n.updateTime==n.updateTime?"asc":"desc"),(0,q.uf)(t).then((function(e){"0000"===(null==e?void 0:e.code)?Z((null==e?void 0:e.data)||{list:[],count:0}):v.ZP.error((null==e?void 0:e.message)||"服务异常"),m(!1)})).catch((function(){v.ZP.error("服务异常"),m(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ze=function(e){ie(e),le(e)},Oe=function(e){var n;null===(n=i.current)||void 0===n||n.setPaginationParams({current:1,pageSize:10}),qe(e)};(0,g.useEffect)((function(){1==we&&(_e({orderType:"desc",page:1,pageSize:10,sortField:"update_time"}),qe(!1))}),[we]);var Ee=void 0===w.o.yx?"calc(100vh - 110px)":"100vh",Fe=(null===(e=c.current)||void 0===e?void 0:e.offsetHeight)||360,Re=null===(n=c.current)||void 0===n?void 0:n.querySelector(".table-header-box"),Ve=null!=Re&&Re.offsetHeight?null==Re?void 0:Re.offsetHeight:0;return(0,B.jsxs)(f.ZP,{autoInsertSpaceInButton:!1,_nk:"".concat($,"41"),children:[(0,B.jsx)("div",{ref:c,className:C,style:{height:Ee},_nk:"".concat($,"13"),children:(0,B.jsx)(j.Z,{ref:i,columns:Se,loading:d,total:(null==_?void 0:_.count)||0,dataSource:(null==_?void 0:_.list)||[],getData:function(e){return _e(e)},formChildren:(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(A.Z.Item,{label:"问卷调查名称",name:"keyword",_nk:"".concat($,"61"),children:(0,B.jsx)(x.Z,{placeholder:"请输入",style:{minWidth:240,width:240},_nk:"".concat($,"71")})})}),extra:(0,B.jsx)(p.Z,{_nk:"".concat($,"22"),children:(0,B.jsx)(h.Z,{className:"extra-btn",onClick:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(!0),he(1);case 2:case"end":return e.stop()}}),e)}))),style:{color:"#fff"},_nk:"".concat($,"37"),children:"新建问卷"})}),paginationMap:{current:"page"},scroll:{x:1300,y:Fe-Ve-168},_nk:"".concat($,"51")})}),(0,B.jsx)(Y,{modalOpenDetail:W,handleCancel:Ze,rowRecords:G,modalType:pe,refresh:Oe,_nk:"".concat($,"81")}),(0,B.jsx)(T.Z,{previewReleaseOpen:oe,rowRecords:G,customerInfo:J,handleCancel:Ze,previewIndex:ue,refresh:Oe,type:"view",_nk:"".concat($,"91")}),(0,B.jsx)(L,{visible:I,cancelModal:function(){Q(null),D(!1)},rowRecords:G,_nk:"".concat($,"a1")}),(0,B.jsx)(k.Z,{width:300,height:144,onOk:function(){var e={surveyId:ye,status:3};(0,q.i2)(s()({},e)).then((function(e){"0000"==(null==e?void 0:e.code)&&(v.ZP.success("失效成功"),ke(!1))}))},onCancel:function(){ke(!1)},visible:xe,className:"modal-table-detail",closable:!1,_nk:"".concat($,"b1"),children:(0,B.jsxs)("div",{className:b,_nk:"".concat($,"14"),children:[(0,B.jsx)("img",{className:"icon",src:t(30716),_nk:"".concat($,"c1")}),(0,B.jsx)("div",{className:"modal-title",_nk:"".concat($,"15"),children:"确认失效？"})]})})]})}},99819:function(e,n,t){t.d(n,{Z:function(){return d}});t(68046);var i=t(58646),a=t(978),c=function(e){return e?"function"==typeof e?e():e:null},o=t(87340),l=t(43016),s=t(60047),r=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]])}return t},u=function(e){var n=e.title,t=e.content,i=e.prefixCls;return a.createElement(a.Fragment,null,n&&a.createElement("div",{className:"".concat(i,"-title")},c(n)),a.createElement("div",{className:"".concat(i,"-inner-content")},c(t)))};var d=a.forwardRef((function(e,n){var t=e.prefixCls,c=e.title,d=e.content,m=e._overlay,v=e.placement,p=void 0===v?"top":v,h=e.trigger,f=void 0===h?"hover":h,A=e.mouseEnterDelay,x=void 0===A?.1:A,k=e.mouseLeaveDelay,g=void 0===k?.1:k,j=e.overlayStyle,y=void 0===j?{}:j,N=r(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),C=a.useContext(l.E_).getPrefixCls,b=C("popover",t),w=C(),q=a.useMemo((function(){return m||(c||d?a.createElement(u,{prefixCls:b,title:c,content:d}):null)}),[m,c,d,b]);return a.createElement(s.Z,(0,i.Z)({placement:p,trigger:f,mouseEnterDelay:x,mouseLeaveDelay:g,overlayStyle:y},N,{prefixCls:b,ref:n,overlay:q,transitionName:(0,o.mL)(w,"zoom-big",N.transitionName)}))}))},79878:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAChJREFUKFNjZEADxtW//p9tZWNEFkbhgCRorAhkPLq70Pn0dhMx4QQAkJQisfKUM1kAAAAASUVORK5CYII="},69968:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAVNJREFUOE+tkz8sBEEUxt+3O7OEkJBItKKQiELuVhQajYRCJQotnagUiuVyuZAtFDSio1WISkGi0SjEuSiEKEQrkZAQcnZm98lcrGw2FGdvmsmbN9/v/Zk3oNRyvc8Bsq05jniciHq+3Q+wcExhtFP2m66TEsRGf5GdFqU2GDxFbG1bxIeOlvfGHwjVGxEmCdE8GAcfUi7elBAYXw1gxK2hPgqZXqQQs+clvKYzM/ZwkduV1rs2qOPdFhMGUgO4XrAVAd2VNTFNAP8m/jljRm5F71vMj2XfWYCpmUEnQjh96cg5TxWNsOLLUhJqMtE6uAPTGNyC2uSQni99uZqO/BfA3Mt7qgCbOpFfDm4tppkL37mqBzDkBYMRaM8Aqs1Kdp2t480A4qi1DoNHzc6M0xgelzOyxG1VqZ4aAshWQuYmZn7GzIPUkFGOIf/+TMkBqvc7fwHqRQR68LMa4gAAAABJRU5ErkJggg=="},10402:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKCAYAAAB4zEQNAAAAAXNSR0IArs4c6QAAAGhJREFUKFNjVNc1Ofb/P8NfJhaW2BsXTjxgQAKMarom/6H8l8z/GWKvXzmzGyaPLAkS+8XIwFR3U0O+h2H16r/okmBN/xkY1vznYk7GKgk19gzpkriMxekgTK+AA4GR4R8TE0sMeiAAANMhOO/rYJN1AAAAAElFTkSuQmCC"},70920:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAAAXNSR0IArs4c6QAAAKdJREFUKFNjVNc1OfafgcGSAQ9gZGA4zqimZ3KE4T+DNT6FDP8ZjjBqGFgo/Pv75wQDA4M4DsUvmZhZLBhBkhr65m7//v3dzMDAwIam+BcTE7PvjYsnd4EVgoC6rln5f4Z/HcgKGRmYKm5ePtUJEoMrZAgNZVa9cX8FIwNDCEjiPwPDmtsaihEMq1f/RVXIwMCgZGzMz/KLcQ9I4h8Xs/Odkyc/wWwAAMP7LU9t6cd9AAAAAElFTkSuQmCC"},30716:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABAJJREFUaEPdml1oFFcUx//nzswmQtUak00Viu1Li6JS0Coa+xDqg0irxKRbRR9EseKD5L0orii+iw+lBEvBFtvoKtoifVBSkLYoaREVxb7UIBh2E1M/AsadufeUO2Zlk93Jzu7clZ3O4+6dc8/vnnPuPefcIcT8oZjrD+MAPLjCwfDw3AmWs4llQi8Qk5VvJusZFix4Qiv/dE0umhEA7l+S8OjRR7DVGij1AYNaAMwG4AMAyAN4RuAxCHEDnvjD5vlXKXVH/x7pqRmAL7XM8VyxgiTtYOATZk5WowkR5Qj4mYlP2U3qL9o49rSa9wtjawJ4cTa5XAhOM/NaAO21TFz0TpaIflcWpZs2525WK6sqAD7XnpRKHlaEHQDeqHayCuPHBeM7S1iHaEs2F1Z2aIDnF9vftTx5DIzPAfPBP6kwg/CjtK0vZ23K/hMGoiIAD8D2xpKrGep7AIvCCDUwZoggttstuWvUCW8meRUB3Eyyg4n7wLzYgGLhRRDuEIsvnO7cbzUD+G7jyoHXuPLTdR2SjtU5kzsFWkAHrAt5HIyt4ZetDiMJPziweoMCOxDAO9v6lSLsrWPAhqVlwfja7hndV+6FsgB6nydS2vdq3yoJ1xniFz0pQW0AY1VYjcuMG2cWHU09pedECYB/wk5Y3zJzV4QJQRCHne5cWstwM8k0Qx2KJI/ovN0sd04/sUsA3AutnezhdNQT1jQAgCwJbHW6Rn8tXogSAO9c20nFvCvKar10G7MW0DIF0Tf2lpHdgQB+VmmPPKg2MSsfXOYBdAJoe21vF2exUyzgnmn/mIW8HHX162UBX66y1jufZa8UdJwKcL7tACs+0tAAgg46XSNHSwB0JeUN3T/NoO6GBgBn7EXvbCtUdq8swD8tbHXz+X4AnY0MAGDASSRS9OnD0ZeuOvlM5j0aYGWDAwxKx0oV8qNXABMXWt8XHjTA8gYHuKlspJo3j96bYoHYA8TehUwHsSDRJ5U4rs1sCdWrWO0x4ZqBQWx6GwXwGISHvtKMhQDeNAFAQduonzUaPMhMKFs2RQk6yHwAg6lE3QBmSiVMJnNC0AkL5MeABPcqxfujQlVM5vQEhtLpnCPle5T694kfAv3z5rqW9TeAqtqP04ErptO+GxkpaOh2ontkWbEC+UzbLYCXRrBCuILGUEn5AuysS/QMD2qF85m3PgS8qwCaagWgsCWlnsBIUQ96BMGXfIUVbQR4fq3KAxhnW3SUa/7+P9sqfuDFvbGlIWLdWiz4q9/cheoD8Jqbu3SXmPZEau76rhT39nrBErG94Cje+mJ9xVQMUpdLPkXpcs3bSmdHxRuaIAGxvmadDhXLi+5Ay8TxU4NKflrP/2uOgXoqVY3s/wB1G19Plr/7iAAAAABJRU5ErkJggg=="}}]);