"use strict";(self.webpackChunksub_know_seat=self.webpackChunksub_know_seat||[]).push([[108],{62977:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(17925),o=n.n(a),i=n(978),r=n(92938),s=n(90577),l=n.n(s),c=[{tabName:"投资知识库",tabCode:"investment_knowledge"},{tabName:"投资推广助手",tabCode:"investment_assistant"}],u=[{text:"当月",value:"this_month"},{text:"上月",value:"last_month"},{text:"今年",value:"this_year"},{text:"自定义",value:"custom_time"}],d={birthdayPoint:"客户生日",positionPoint:"持仓基金最新投资资讯",industryOver30Point:"账户持仓单一行业超30%",incomeRise10Point:"持仓基金持有收益率超+10%",incomeFall10Point:"持仓基金持有收益率超-10%",similarFundPoint:"相似基金",all:"总计"},p=n(49630),m=(n(16769),n(80348),n(8532),n(48493)),h=n(6889),f=n(62365),v=n(2344),g=n(22944),b=n(73287),k=n(57065),y=n.n(k),_="timeAll___lqgji",x="timeAllDetail___nEw9u",T="timeChange___fBAvE",w="timeChoose___URd9I",S="searchBtn___xycpF",D=n(46105),j=n(50107),N=m.Z.RangePicker,C="+kTF",M=function(e){var t,n=(0,r.useRequest)(D.Lh,{manual:!0}),a=(n.loading,n.run),s=n.data,c=e.dataTable,p=(0,i.useState)([]),m=o()(p,2),k=(m[0],m[1],(0,i.useState)(!1)),M=o()(k,2),R=M[0],Y=M[1],F=(0,i.useRef)(),I=(0,i.useRef)(!1),P=[{dataIndex:"promotionType",width:150,title:"推广点",filter:!1,sorter:!1,render:function(e,t){return(0,j.jsx)("div",{_nk:"".concat(C,"11"),children:d[e]})}},{dataIndex:"customerName",width:150,title:"客户姓名",filter:!1,sorter:!1},{dataIndex:"fundAccountId",width:150,title:"基金账户",filter:!1,sorter:!1},{dataIndex:"seatName",width:150,title:"使用人",filter:!1,sorter:!1},{dataIndex:"createTime",width:150,title:"使用时间",filter:!1,sorter:!1,render:function(e){return l()(e).format("YYYY-MM-DD")||"-"}},{dataIndex:"content",width:150,title:"具体内容",filter:!1,sorter:!1,render:function(e,t){return(0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:e},_nk:"".concat(C,"12")})}}],L=[{dataIndex:"promotionType",width:150,title:"推广点",filter:!1,sorter:!1,render:function(e,t){return(0,j.jsx)("div",{_nk:"".concat(C,"13"),children:d[e]})}},{dataIndex:"clickNumber",width:150,title:"点击次数",filter:!1,sorter:!1},{dataIndex:"userNumber",width:150,title:"使用总次数",filter:!1,sorter:!1},{dataIndex:"opeater",width:150,title:"操作",filter:!1,sorter:!1,render:function(e,t){return"all"==t.promotionType?(0,j.jsx)("div",{className:"table-btns",_nk:"".concat(C,"14"),children:(0,j.jsx)(h.Z,{type:"link",onClick:function(){return ut(t)},_nk:"".concat(C,"21"),children:" 全部明细"})}):(0,j.jsx)("div",{className:"table-btns",_nk:"".concat(C,"15"),children:(0,j.jsx)(h.Z,{type:"link",onClick:function(){return ut(t)},_nk:"".concat(C,"22"),children:" 使用明细"})})}}],Z=(0,i.useState)(0),z=o()(Z,2),E=z[0],B=z[1],q=(0,i.useState)(0),A=o()(q,2),U=A[0],O=A[1],H=(0,i.useState)(0),V=o()(H,2),G=V[0],J=V[1],K=(0,i.useState)(!1),Q=o()(K,2),W=Q[0],X=Q[1],$=(0,i.useState)([]),ee=o()($,2),te=ee[0],ne=ee[1],ae=(0,i.useState)([]),oe=o()(ae,2),ie=oe[0],re=oe[1],se=(0,i.useState)([]),le=o()(se,2),ce=le[0],ue=le[1],de=(0,i.useState)([]),pe=o()(de,2),me=pe[0],he=pe[1],fe=(0,i.useState)(""),ve=o()(fe,2),ge=ve[0],be=ve[1],ke=(0,i.useState)(""),ye=o()(ke,2),_e=ye[0],xe=ye[1],Te=(0,i.useRef)(""),we=(0,i.useState)(""),Se=o()(we,2),De=Se[0],je=Se[1],Ne=(0,i.useState)(""),Ce=o()(Ne,2),Me=Ce[0],Re=Ce[1],Ye=(0,i.useState)(""),Fe=o()(Ye,2),Ie=Fe[0],Pe=Fe[1],Le=(0,i.useState)(1),Ze=o()(Le,2),ze=Ze[0],Ee=Ze[1],Be=(0,i.useRef)(1),qe=(0,i.useRef)(1),Ae=(0,i.useRef)(1),Ue=(0,i.useState)(""),Oe=o()(Ue,2),He=Oe[0],Ve=Oe[1],Ge=(0,i.useState)(""),Je=o()(Ge,2),Ke=Je[0],Qe=Je[1],We=(0,i.useState)(""),Xe=o()(We,2),$e=Xe[0],et=Xe[1],tt=(0,i.useState)(""),nt=o()(tt,2),at=nt[0],ot=nt[1],it=(0,i.useState)(!1),rt=o()(it,2),st=rt[0],lt=(rt[1],(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(h.Z,{type:"primary",className:S,onClick:function(){return ht()},style:{marginRight:-2},_nk:"".concat(C,"23"),children:"导出"})})),ct=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z.Item,{label:"推广点",name:"pensionFundType",_nk:"".concat(C,"31"),children:(0,j.jsx)(v.Z,{options:[{label:"客户生日",value:"birthdayPoint"},{label:"持仓基金最新投资资讯",value:"positionPoint"},{label:"账户持仓单一行业超30%",value:"industryOver30Point"},{label:"账户基金持有收益率超+10%",value:"incomeRise10Point"},{label:"账户基金持有收益率超-10%",value:"incomeFall10Point"},{label:"相似基金",value:"similarFundPoint"}],onChange:function(e){console.log(e,"val"),be(e)},_nk:"".concat(C,"41")})}),(0,j.jsx)(f.Z.Item,{label:"使用人员",name:"hqtFundCode",_nk:"".concat(C,"32"),children:(0,j.jsx)(v.Z,{options:me,onChange:function(e){console.log(e,"val"),Pe(e)},_nk:"".concat(C,"42")})}),(0,j.jsxs)("div",{_nk:"".concat(C,"16"),children:[(0,j.jsx)("span",{className:x,_nk:"".concat(C,"51"),children:u.map((function(e,t){return(0,j.jsx)("span",{className:t==U?w:T,onClick:function(){return mt(t)},_nk:"iAr".concat(C,"52"),children:e.text})}))}),3==U?(0,j.jsx)(N,{onChange:function(e,t){if(null!=e){var n={promotionType:ge,seatName:Ie,dateType:"userDefined",beginDate:new Date(new Date(t[0]).toLocaleDateString()).getTime(),endDate:ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2]),page:0,pageSize:10};xe("userDefined"),Te.current="userDefined";var a=new Date(new Date(t[0]).toLocaleDateString()).getTime(),o=ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2]);je(a),Re(o),dt(n)}},defaultValue:[""!=He?y()(He,"YYYY-MM-DD"):"",""!=Ke?y()(Ke,"YYYY-MM-DD"):""],_nk:"".concat(C,"61")}):""]})]}),ut=function(e){X(!0),Be.current+=1,Ee(Be.current),"all"==e.promotionType?Y(!0):Y(!1),be(e.promotionType),xe(Te.current||"thisMonth"),a();var t={};t="userDefined"==Te.current?{beginDate:qe.current,endDate:Ae.current,promotionType:e.promotionType,seatName:Ie,dateType:Te.current,page:0,pageSize:10}:{promotionType:e.promotionType,seatName:Ie,dateType:Te.current||"thisMonth",page:0,pageSize:10},console.log(Te.current,"dataTypeDetail"),dt(t)},dt=function(e){(0,D.rF)(e).then((function(e){var t,n;ne(null==e||null===(t=e.data)||void 0===t?void 0:t.list),re(null==e||null===(n=e.data)||void 0===n?void 0:n.count)}))};(0,i.useEffect)((function(){var e=[];null==s||s.userNames.forEach((function(t){var n={value:t,label:t};e.push(n)})),he(e)}),[s]),(0,i.useEffect)((function(){if(console.log(c,"dataTable",st),null!=c){var e=null==c?void 0:c.promotionTypeCount,t={promotionType:"all",clickNumber:c.clickNumberTotal,userNumber:c.userNumberTotal};e.push(t),ue(e)}}),[c]);var pt=function(e){(0,D.jr)(e).then((function(e){var t,n,a,o=null==e||null===(t=e.data)||void 0===t?void 0:t.promotionTypeCount,i={promotionType:"all",clickNumber:null==e||null===(n=e.data)||void 0===n?void 0:n.clickNumberTotal,userNumber:null==e||null===(a=e.data)||void 0===a?void 0:a.userNumberTotal};o.push(i),ue(o)}))},mt=function(e){switch(console.log(e),O(e),e){case 0:var t={promotionType:ge,seatName:Ie,dateType:"thisMonth",page:0,pageSize:10};xe("thisMonth"),Te.current="thisMonth",dt(t),je(""),Re("");break;case 1:var n={promotionType:ge,seatName:Ie,dateType:"lastMonth",page:0,pageSize:10};Te.current="lastMonth",xe("lastMonth"),dt(n),je(""),Re("");break;case 2:var a={promotionType:ge,seatName:Ie,page:0,pageSize:10,dateType:"thisYear"};Te.current="thisYear",xe("thisYear"),dt(a),je(""),Re("")}},ht=function(){var e={promotionType:ge,beginDate:De,endDate:Me,seatName:Ie,dateType:_e};(0,D.H6)(e).then((function(e){console.log(e)}))},ft=function(e,t,n){return new Date(e,t-1,n,23,59,59,999).getTime()};null===(t=F.current)||void 0===t||t.offsetHeight;return(0,j.jsxs)("div",{style:{height:"100%"},ref:F,_nk:"".concat(C,"17"),children:[(0,j.jsx)("span",{className:_,_nk:"".concat(C,"53"),children:u.map((function(e,t){return(0,j.jsx)("span",{className:t==E?w:T,onClick:function(){return function(e){switch(console.log(e),B(e),O(e),J(e),e){case 0:pt({dateType:"thisMonth"}),Te.current="thisMonth";break;case 1:pt({dateType:"lastMonth"}),Te.current="lastMonth";break;case 2:pt({dateType:"thisYear"}),Te.current="thisYear"}}(t)},_nk:"iAr".concat(C,"54"),children:e.text})}))}),3==E?(0,j.jsx)(N,{onChange:function(e,t){if(Ve(t[0]),Qe(t[1]),et(new Date(new Date(t[0]).toLocaleDateString()).getTime()),ot(ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2])),je(new Date(new Date(t[0]).toLocaleDateString()).getTime()),Re(ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2])),Te.current="userDefined",qe.current=new Date(new Date(t[0]).toLocaleDateString()).getTime(),Ae.current=ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2]),null!=e){var n={dateType:"userDefined",beginDate:new Date(new Date(t[0]).toLocaleDateString()).getTime(),endDate:ft(t[1].split("-")[0],t[1].split("-")[1],t[1].split("-")[2])};pt(n)}else{pt({dateType:"lastMonth"})}},_nk:"".concat(C,"62")}):"",(0,j.jsx)(b.Z,{columns:L||[],dataSource:ce,scroll:{x:"100%",y:660},isShowPagination:!1,className:"table-footer",_nk:"".concat(C,"71")}),(0,j.jsx)(g.Z,{open:W,getContainer:!1,width:1422,height:634,footer:!1,onCancel:function(){X(!1),Be.current+=1,Ee(Be.current),Pe("")},title:R?"全部明细":"使用明细",maskClosable:!0,className:"modal-table-detail",_nk:"".concat(C,"81"),children:(0,j.jsx)(b.Z,{dataSource:te||[],columns:P||[],isFirstRun:!1,scroll:{x:"100%",y:460},total:ie,formChildren:ct,searchFormParams:{customResetForm:function(e,t){e.resetFields(),I.current=!0,O(0),t({pageInfo:{current:1,pageSize:10}})}},getData:function(e){console.log(e,"params");var t="",n="",a="";switch(G){case 0:t="thisMonth",n="",a="";break;case 1:t="lastMonth",n="",a="";break;case 2:t="thisYear",n="",a="";break;case 3:""!=$e&&""!=at?(t="userDefined",n=$e,a=at):(t="thisMonth",n=$e,a=at)}var o={};I.current?(O(G),o={promotionType:"",seatName:e.hqtFundCode||"",dateType:t,page:e.current-1||0,pageSize:e.pageSize||10,endDate:a||"",beginDate:n||""},be(""),Te.current=t,je(n),Re(n),Pe("")):o={promotionType:ge,beginDate:De||"",endDate:Me||"",seatName:e.hqtFundCode||"",dateType:Te.current||"thisMonth",page:e.current-1||0,pageSize:e.pageSize||10},dt(o),I.current=!1},extra:lt,className:"table-footer-null",_nk:"".concat(C,"72")},ze)})]})},R="7daZ",Y=function(){var e=(0,r.useRequest)(D.jr,{manual:!0}),t=(e.loading,e.run),n=e.data,a=(0,i.useState)("investment_assistant"),s=o()(a,2),l=s[0],u=s[1],d=(0,i.useState)(null),m=o()(d,2),h=m[0],f=m[1];return(0,i.useEffect)((function(){t({dateType:"thisMonth"})}),[]),(0,i.useEffect)((function(){f(n)}),[n]),(0,j.jsx)("div",{className:"callRecordRoute",_nk:"".concat(R,"11"),children:(0,j.jsxs)("div",{className:"main-box",_nk:"".concat(R,"12"),children:[(0,j.jsx)("div",{className:"box-title",_nk:"".concat(R,"13"),children:"坐席使用统计"}),(0,j.jsx)(p.Z,{className:"modal-tab",tabList:c||[],current:l,onClick:function(e){u(e),t({dateType:"thisMonth"})},_nk:"".concat(R,"21"),children:(0,j.jsx)("div",{_nk:"".concat(R,"14"),children:"investment_assistant"==l&&(0,j.jsx)(M,{dataTable:h,_nk:"".concat(R,"31")})})})]})})}},40396:function(e,t,n){n.d(t,{LR:function(){return l}});var a=n(17662),o=n.n(a),i=n(31404),r=n.n(i),s=(n(87017),n(80348),n(6503),n(29964),n(69357),n(48668),n(6170),n(11996),n(92938),function(e,t){return"[object Blob]"===(null===toString||void 0===toString?void 0:toString.call(e))?e:new Blob([e],{type:t["content-type"]})}),l=function(){var e=r()(o()().mark((function e(t){var n,a,i,r,l,c,u,d,p,m;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.data,r=t.headers,l=t.headers["content-disposition"],c=null===(n=decodeURIComponent(l))||void 0===n?void 0:n.split("utf-8''"),console.log("xxx-window.navigator",window.navigator),window.navigator&&null!==(a=window.navigator)&&void 0!==a&&a.msSaveBlob?(d=new Blob([i],{type:r["content-type"]}),null===(u=window.navigator)||void 0===u||u.msSaveBlob(d,(null==c?void 0:c[1])||"downloaded-file")):(p=s(i,r),(m=document.createElement("a")).style.display="none",m.download=null==c?void 0:c[1],m.href=URL.createObjectURL(p),document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(m.href)),e.abrupt("return",200===t.status?Promise.resolve(t.data):Promise.reject(t.data));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);