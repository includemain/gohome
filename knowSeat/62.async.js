"use strict";(self.webpackChunksub_know_seat=self.webpackChunksub_know_seat||[]).push([[62],{53062:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var a=t(978),r="accountAls___IbSjd",l=t(49630),i=t(84534),c=t(60030),o=t(90681),u=(t(63669),t(79062),t(16769),t(48239),t(80348),t(34264)),d=t(69526),s=t(92938),m=t(86013),h=t(88263),f=t(50107),v="/2BJ",x=function(e){var n,t,r,l,i,o=e.curTab,x=(0,a.useRef)(null),p=(0,s.useRequest)(m.vw,{manual:!0}),y=p.run,k=p.data,b=p.loading,g=(0,a.useContext)(c.CustomContext).fundAccId;(0,a.useEffect)((function(){g&&y({keyword:g,searchType:2})}),[g]);var _=(0,a.useRef)(null),A={tooltip:{trigger:"item",formatter:function(e){var n,t=null==k||null===(n=k.list)||void 0===n?void 0:n.find((function(n){return n.fundname===e.name}));return"".concat(e.name,"<br />市值：").concat(e.value,"<br />权重：").concat((null==t?void 0:t.weight)||"-","%")},borderColor:"#fff",borderWidth:0,padding:14,textStyle:{fontSize:12,color:"#002865"},extraCssText:"border-radius: 12px;line-height: 24px;"},legend:{top:"1%",orient:"vertical",type:"scroll",left:"45%",itemWidth:10,itemHeight:10,itemGap:20,formatter:function(e){var n,t=null==k||null===(n=k.list)||void 0===n?void 0:n.find((function(n){return n.fundname===e}));return"{a|"+e+"}{b|"+(null==t?void 0:t.balance)+"}{c|"+(null==t?void 0:t.weight)+"%}"},textStyle:{rich:{a:{align:"left",padding:[4,4],borderRadius:4,width:300,color:"#002865",fontSize:14},b:{align:"right",padding:[4,4],color:"#002865",borderRadius:4,width:100,fontSize:14},c:{align:"right",padding:[4,4],borderRadius:4,color:"#002865",width:100,fontSize:14}}}},series:[{name:"基金市值分布",type:"pie",radius:["80","120"],left:"10%",center:["10%","50%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!1}},labelLine:{show:!1},data:(null==k||null===(n=k.list)||void 0===n?void 0:n.map((function(e){return{value:e.balance,name:e.fundname}})))||[]}]};return(0,a.useEffect)((function(){if(_.current){var e=d.S1(_.current);e.setOption(A);var n=new ResizeObserver((function(){e.resize()}));return n.observe(_.current),function(){e.dispose(),n.disconnect()}}}),[o,k]),b?(0,f.jsx)("div",{className:"emptry-box-placeholder",_nk:"".concat(v,"11"),children:(0,f.jsx)(u.Z,{size:"large",_nk:"".concat(v,"21")})}):null!=k&&null!==(t=k.list)&&void 0!==t&&t.length?(0,f.jsxs)("div",{className:"fund-analysis",ref:x,_nk:"".concat(v,"13"),children:[(0,f.jsxs)("div",{className:"fund-title",_nk:"".concat(v,"14"),children:[(0,f.jsx)("div",{style:{width:320},_nk:"".concat(v,"15"),children:"基金名称"}),(0,f.jsx)("div",{style:{width:110,textAlign:"right"},_nk:"".concat(v,"16"),children:"最新市值(元)"}),(0,f.jsx)("div",{style:{width:110,textAlign:"right"},_nk:"".concat(v,"17"),children:"权重"})]}),(0,f.jsx)("div",{ref:_,className:"fund-chart",_nk:"".concat(v,"18")}),!(null==k||null===(r=k.exchangeRate)||void 0===r||!r.contains)&&(0,f.jsx)("div",{className:"fund-summay",dangerouslySetInnerHTML:{__html:(null==k||null===(l=k.exchangeRate)||void 0===l?void 0:l.lastTradingDate)+"&nbsp;&nbsp;&nbsp;&nbsp;美元汇率中间价："+(null==k||null===(i=k.exchangeRate)||void 0===i?void 0:i.rate)},_nk:"".concat(v,"19")})]}):(0,f.jsx)("div",{className:"emptry-box-placeholder",_nk:"".concat(v,"12"),children:(0,f.jsx)(h.Z,{_nk:"".concat(v,"31")})})},p=t(17662),y=t.n(p),k=t(35118),b=t.n(k),g=t(31404),_=t.n(g),A=t(17925),w=t.n(A),j=(t(76551),t(23279),t(5862)),I=t(81884),C=t(2344),N=t(73287),S="hasFund",R="returnFund",T="allFund",E="currency",D="fund",F=[{label:"按币种汇总",value:E},{label:"按基金类型汇总",value:D}],Z=[{label:"持有损益分析",value:S},{label:"赎回损益分析",value:R},{label:"全部基金分析",value:T}],M="curve",B="detailed",L=[{label:"区间收益曲线",value:M},{label:"区间收益明细",value:B}],Y="buttonGroup___ikJPr",K="p0zk",O=function(e){var n=e.buttons,t=e.onClick,a=e.activeValue;return(0,f.jsx)("div",{className:Y,_nk:"".concat(K,"11"),children:n.map((function(e){return(0,f.jsx)("div",{className:"btn-tab ".concat(e.value===a?"active":""),onClick:function(){return t(e.value)},_nk:"iAr".concat(K,"12"),children:e.label},e.value)}))})},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAG5JREFUOE9jZKAQMFKon4F2Buw6ck7KzcboGSEXYnUBSDPL//+n/zMx1DhbG8/HZwhOL+w9ejaR8R9DCyFD8IYBMYYQDES4IQyMJc62RsvRvUNbAyjyAjGaQd6hXTRSlJAIpT5keYKxQMgwig0AAEBqQhHeDtl9AAAAAElFTkSuQmCC",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAH1JREFUOE9jZKAQMFKon2E4GrDryDkpNxujZ9jCBpscShiAFLD8/3/6PxNDjbO18XxkQ/YePZvI+I+h5Q8joymyBRiBCFOIbAg2MZjhWGMBWQNIIchmbK4Cy+FKBzBDQPK4NOM1ACS59/C5SBDtbGu0HJdFwzEhkZq5KA4DAPfFOhG6Xp2sAAAAAElFTkSuQmCC",U="Gv6W",Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return(0,f.jsx)(j.Z.Summary,{fixed:!0,_nk:"".concat(U,"11"),children:(0,f.jsx)(j.Z.Summary.Row,{_nk:"".concat(U,"12"),children:Array(e).fill(void 0).map((function(e,t){return(0,f.jsx)(j.Z.Summary.Cell,{index:t,_nk:"iAr".concat(U,"13"),children:n[t]?n[t]:"--"},t)}))})})},H=function(e){var n,t=e.curTab,r=(0,a.useContext)(c.CustomContext),l=r.userInfo,i=r.fundAccId,o=void 0===i?"":i,u=(0,a.useRef)(),d=(0,a.useState)(!1),s=w()(d,2),h=s[0],v=s[1],x=(0,a.useState)([]),p=w()(x,2),k=p[0],g=p[1],A=(0,a.useState)(E),j=w()(A,2),M=j[0],B=j[1],L=(0,a.useState)(S),Y=w()(L,2),K=Y[0],H=Y[1],P=(0,a.useRef)(),V=(0,a.useRef)(),J=(l.customerId,function(){var e=_()(y()().mark((function e(n,t){var a,r;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b()({},n),o&&t){e.next=3;break}return e.abrupt("return",{data:{list:[],count:0}});case 3:return v(!0),e.next=6,null==t?void 0:t(a).catch((function(){return v(!1)}));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),W=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={156:"元",840:"美元"};return["holdNav","nav"].includes(t)&&null!==(n=e.children)&&void 0!==n&&n.length?"":a[e.currencyTypeId]||"元"},X=[{width:220,dataIndex:"fundname",title:"基金名称",ellipsis:!1},{width:130,dataIndex:"holdShares",title:"持有份额（份）"},{width:100,dataIndex:"holdNav",title:"平均成本",render:function(e,n){return e?e+W(n,"holdNav"):"-"}},{width:100,dataIndex:"holdCost",title:"持有总投入",render:function(e,n){return e?e+W(n):"-"}},{width:120,dataIndex:"navDate",title:"净值日期"},{width:100,dataIndex:"nav",title:"基金份额净值",render:function(e,n){return e?e+W(n,"nav"):"-"}},{width:100,dataIndex:"value",title:"最新市值",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"holdIncome",title:"收益",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"weight",title:"权重",render:function(e,n){return e?e+"%":"-"}}],q=[{width:220,dataIndex:"fundname",title:"基金名称",ellipsis:!1},{width:100,dataIndex:"reVolume",title:"赎回份额（份）"},{width:100,dataIndex:"reCost",title:"赎回总投入",render:function(e,n){return e?e+W(n):"-"}},{width:220,dataIndex:"reAmount",title:"赎回金额（含现金分红金额）",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"bonus",title:"现金分红金额",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"reIncome",title:"收益",render:function(e,n){return e?e+W(n):"-"}}],$=[{width:220,dataIndex:"fundname",title:"基金名称",ellipsis:!1},{width:100,dataIndex:"allCost",title:"总投入",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"allFee",title:"交易费用",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"holdShares",title:"持有份额（份）"},{width:100,dataIndex:"value",title:"持有最新市值",render:function(e,n){return e?e+W(n):"-"}},{width:180,dataIndex:"reAmount",title:"已赎回金额（含现金分红金额）",render:function(e,n){return e?e+W(n):"-"}},{width:100,dataIndex:"allIncome",title:"收益",render:function(e,n){return e?e+W(n):"-"}}],ee=(0,a.useRef)(X),ne=(0,a.useRef)(),te=function(){var e=_()(y()().mark((function e(){var n;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],M!==E||K!==S){e.next=8;break}return e.next=4,J({keyword:o,searchType:2},m.VE).then((function(e){var n,t,a,r=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.currencyTypeName||"--")+"-总计",holdShares:"--",holdNav:"--",navDate:"--",nav:"--",children:e.detail})})))||[],l=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},i=l.holdCost,c=l.value,o=l.holdIncome,u=l.weight,d=(null==e||null===(a=e.data)||void 0===a?void 0:a.exchangeRate)||{},s=d.lastTradingDate,m=d.rate,h=d.contains;return P.current=Q(9,{0:"账户总计",3:i&&i+"元",6:c&&c+"元",7:o&&o+"元",8:u&&u+"%"}),V.current=h?s+"&nbsp;&nbsp;&nbsp;&nbsp;美元汇率中间价："+m:"",r}));case 4:n=e.sent,ee.current=X,e.next=41;break;case 8:if(M!==E||K!==R){e.next=15;break}return e.next=11,J({keyword:o,searchType:2},m.th).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.currencyTypeName||"--")+"-总计",reVolume:"--",children:e.detail})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.reCost,i=r.reAmount,c=r.reIncome,o=r.bonus,u=((null==e?void 0:e.data)||{}).contains;return P.current=Q(6,{0:"账户总计",2:l&&l+"元",3:i&&i+"元",4:o&&o+"元",5:c&&c+"元"}),V.current=u?"注：人民币市值 = 外市市值 * 基金净值日当天的汇率中间价":"",a}));case 11:n=e.sent,ee.current=q,e.next=41;break;case 15:if(M!==E||K!==T){e.next=22;break}return ee.current=$,e.next=19,J({keyword:o,searchType:2},m.gY).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.currencyTypeName||"--")+"-总计",holdShares:"--",children:e.detail})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.allCost,i=r.value,c=r.allFee,o=r.reAmount,u=r.allIncome,d=((null==e?void 0:e.data)||{}).contains;return P.current=Q(7,{0:"账户总计",1:l&&l+"元",2:c&&c+"元",4:i&&i+"元",5:o&&o+"元",6:u&&u+"元"}),V.current=d?"注：人民币市值 = 外市市值 * 基金净值日当天的汇率中间价":"",a}));case 19:n=e.sent,e.next=41;break;case 22:if(M!==D||K!==S){e.next=29;break}return ee.current=X,e.next=26,J({keyword:o,searchType:2},m.az).then((function(e){var n,t,a,r=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.fundTypeName||"--")+"-总计",holdShares:"--",holdNav:"--",navDate:"--",nav:"--",children:e.detail})})))||[],l=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},i=l.holdCost,c=l.value,o=l.holdIncome,u=l.weight,d=(null==e||null===(a=e.data)||void 0===a?void 0:a.exchangeRate)||{},s=d.lastTradingDate,m=d.rate,h=d.contains;return V.current=h?s+"&nbsp;&nbsp;&nbsp;&nbsp;美元汇率中间价："+m:"",P.current=Q(9,{0:"账户总计",3:i&&i+"元",6:c&&c+"元",7:o&&o+"元",8:u&&u+"%"}),r}));case 26:n=e.sent,e.next=41;break;case 29:if(M!==D||K!==R){e.next=36;break}return e.next=32,J({keyword:o,searchType:2},m.Xy).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.fundTypeName||"--")+"-总计",reVolume:"--",children:e.detail})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.reCost,i=r.reAmount,c=r.reIncome,o=r.bonus,u=((null==e?void 0:e.data)||{}).contains;return P.current=Q(6,{0:"账户总计",2:l&&l+"元",3:i&&i+"元",4:o&&o+"元",5:c&&c+"元"}),V.current=u?"注：人民币市值 = 外市市值 * 基金净值日当天的汇率中间价":"",a}));case 32:n=e.sent,ee.current=q,e.next=41;break;case 36:if(M!==D||K!==T){e.next=41;break}return ee.current=$,e.next=40,J({keyword:o,searchType:2},m.hx).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.fundTypeName||"--")+"-总计",holdShares:"--",reAmount:e.rmbReAmount,allIncome:e.rmbAllIncome,allIncomeRate:e.rmbAllIncomeRate,children:e.detail})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.allCost,i=r.value,c=r.allFee,o=r.reAmount,u=r.allIncome,d=((null==e?void 0:e.data)||{}).contains;return P.current=Q(7,{0:"账户总计",1:l&&l+"元",2:c&&c+"元",4:i&&i+"元",5:o&&o+"元",6:u&&u+"元"}),V.current=d?"注：人民币市值 = 外市市值 * 基金净值日当天的汇率中间价":"",a}));case 40:n=e.sent;case 41:g(n),v(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){te()}),[M,K,o]),(0,a.useEffect)((function(){B(E),H(S)}),[o]);var ae=(null===(n=ne.current)||void 0===n?void 0:n.offsetHeight)||360;return(0,f.jsx)("div",{style:{marginBottom:24,height:"100%"},ref:ne,_nk:"".concat(U,"21"),children:(0,f.jsx)(N.Z,{columns:ee.current,ref:u,dataSource:k||[],loading:h,extra:(0,f.jsxs)(I.Z,{_nk:"".concat(U,"41"),children:[(0,f.jsx)(C.Z,{style:{width:150},options:F,value:M,onChange:function(e){return B(e)},_nk:"".concat(U,"51")}),(0,f.jsx)(O,{buttons:Z,activeValue:K,onClick:function(e){return H(e)},_nk:"".concat(U,"61")})]}),total:void 0,expandable:{expandIcon:function(e){var n,t=e.expanded,a=e.onExpand,r=e.record;return null!==(n=r.detail)&&void 0!==n&&n.length?t?(0,f.jsx)("img",{src:G,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(U,"71")}):(0,f.jsx)("img",{src:z,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(U,"72")}):(0,f.jsx)("div",{className:"tree-emptry-switch",_nk:"".concat(U,"22")})},defaultExpandedRowKeys:Array(20).fill(void 0).map((function(e,n){return n}))},isShowPagination:!1,getData:J,isfirstRun:!1,paginationMap:{current:"page"},summary:function(){return null!=k&&k.length?P.current:null},footer:function(){return!!V.current&&(0,f.jsx)("div",{className:"table-right-summay",dangerouslySetInnerHTML:{__html:V.current},_nk:"".concat(U,"23")})},scroll:{x:"100%",y:ae-185},_nk:"".concat(U,"31")},M+K+t)})},P=(t(6503),t(62365)),V=t(60047),J=t(48493),W=t(6889),X=t(25025),q=t(57065),$=t.n(q),ee=a.useEffect,ne="53UK",te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return(0,f.jsx)(j.Z.Summary,{fixed:!0,_nk:"".concat(ne,"11"),children:(0,f.jsx)(j.Z.Summary.Row,{_nk:"".concat(ne,"12"),children:Array(e).fill(void 0).map((function(e,t){return(0,f.jsx)(j.Z.Summary.Cell,{index:t,_nk:"iAr".concat(ne,"13"),children:n[t]?n[t]:"--"},t)}))})})},ae=function(e){var n,t=e.curTab,r=P.Z.useForm(),l=w()(r,1)[0],i=(0,a.useState)(E),o=w()(i,2),s=o[0],v=o[1],x=(0,a.useState)(M),p=w()(x,2),k=p[0],g=p[1],A=(0,a.useState)(!1),j=w()(A,2),S=j[0],R=j[1],T=(0,a.useState)([]),Z=w()(T,2),Y=Z[0],K=Z[1],U=(0,a.useContext)(c.CustomContext),Q=(U.userInfo,U.fundAccId),H=((0,a.useRef)([]),(0,a.useRef)()),q=(0,a.useRef)(null),ae=(0,a.useRef)(),re=function(){var e=_()(y()().mark((function e(n,t){var a,r;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b()({},n),Q&&t&&a.beginDate&&a.endDate){e.next=3;break}return e.abrupt("return",new Promise((function(e){e({code:"0000",data:null})})));case 3:return R(!0),e.next=6,null==t?void 0:t(a).catch((function(){return R(!1)}));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),le=function(e,n){return{156:"元",840:"美元"}[e.currencyTypeId]||""},ie=[{width:220,dataIndex:"fundname",title:"基金名称",ellipsis:!1},{width:100,dataIndex:"intervalCost",title:"总投入",render:function(e,n){return e?e+le(n):"-"}},{width:100,dataIndex:"intervalIncome",title:"收益",render:function(e,n){return e?e+le(n):"-"}}],ce=function(){var e=_()(y()().mark((function e(){var n,t,a,r,i,c,o;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,l.validateFields();case 3:if(t=e.sent,a=t.dateTime||[],r=w()(a,2),i=r[0],c=r[1],o={keyword:Q,searchType:2,beginDate:i?i.format("YYYY-MM-DD"):void 0,endDate:c?c.format("YYYY-MM-DD"):void 0},k!==M){e.next=12;break}return e.next=9,re(o,m.en).then((function(e){return(null==e?void 0:e.data)||[]}));case 9:n=e.sent,e.next=22;break;case 12:if(s!==E||k!==B){e.next=18;break}return e.next=15,re(o,m.jH).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){return b()(b()({},e),{},{key:n,fundname:(e.currencyTypeName||"--")+"-总计",children:e.detail})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.intervalCost,i=r.intervalIncome;return H.current=te(3,{0:"账户总计",1:l&&l+"元",2:i&&i+"元"}),a}));case 15:n=e.sent,e.next=22;break;case 18:if(s!==D||k!==B){e.next=22;break}return e.next=21,re(o,m.Se).then((function(e){var n,t,a=(null==e||null===(n=e.data)||void 0===n||null===(n=n.subtotal)||void 0===n?void 0:n.map((function(e,n){var t;return b()(b()({},e),{},{key:n,intervalCost:e.allCost,intervalIncome:e.allIncome,fundname:(e.fundTypeName||"--")+"-总计",children:null===(t=e.detail)||void 0===t?void 0:t.map((function(e){return b()(b()({},e),{},{intervalCost:e.allCost,intervalIncome:e.allIncome})}))})})))||[],r=(null==e||null===(t=e.data)||void 0===t?void 0:t.summary)||{},l=r.allCost,i=r.allIncome;return H.current=te(3,{0:"账户总计",1:l&&l+"元",2:i&&i+"元"}),a}));case 21:n=e.sent;case 22:K(n),R(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){Q&&ce()};ee((function(){oe()}),[s,k,t]),ee((function(){l.resetFields()}),[Q]),ee((function(){if(q.current&&k===M){var e=(null==Y?void 0:Y.map((function(e){return e.deadLine})))||[],n={title:{text:"历史收益（元）"},grid:{left:"5%",right:"1%"},tooltip:{trigger:"axis",formatter:function(e){var n=(null==e?void 0:e[0])||{},t=n.value,a=n.name,r=$()(a).format("MM-DD"),l=$()(a).format("dddd");return"".concat(t," <br/> ").concat(r,"  ").concat(l)}},xAxis:[{type:"category",axisLabel:{color:"#B1B1B1",fontSize:14},axisPointer:{type:"shadow",shadowStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(32, 115, 236, 0)"},{offset:1,color:"rgba(68, 172, 247, 1)"}],global:!1},opacity:.2}},axisLine:!1,data:e},{type:"category",axisLabel:!1,axisPointer:{type:"line",lineStyle:{color:"rgba(0, 110, 255, 0.22)",type:"solid",width:2}},axisLine:!1,data:e}],yAxis:{type:"value",axisLabel:{color:"#B1B1B1",fontSize:14,showMinLabel:!1,showMaxLabel:!1},splitLine:{lineStyle:{type:"dashed",color:"rgba(0, 0, 0, 0.15)",width:.6}},min:function(e){return e.min-.1*(e.max-e.min)},max:function(e){return e.max+.1*(e.max-e.min)}},series:[{data:(null==Y?void 0:Y.map((function(e){return e.allIncome})))||[],type:"line",smooth:!0,symbolSize:7,showSymbol:!1,areaStyle:{color:"rgba(0, 110, 255, 0.04)"},lineStyle:{color:"#337BFA"},itemStyle:{show:!1},emphasis:{lineStyle:{color:"#337BFA"},itemStyle:{borderColor:"rgba(0, 199, 157, 1)",color:"#fff",borderWidth:2}}}]},t=d.S1(q.current);t.setOption(n);var a=new ResizeObserver((function(){t.resize()}));return a.observe(q.current),function(){null==t||t.dispose(),null==a||a.disconnect()}}}),[Y,S]);var ue=(null===(n=ae.current)||void 0===n?void 0:n.offsetHeight)||360;return(0,f.jsxs)("div",{className:"history-analysis",ref:ae,_nk:"".concat(ne,"23"),children:[(0,f.jsxs)("div",{className:"history-title",_nk:"".concat(ne,"24"),children:[(0,f.jsxs)(I.Z,{_nk:"".concat(ne,"51"),children:[(0,f.jsx)(O,{buttons:L,activeValue:k,onClick:function(e){return g(e)},_nk:"".concat(ne,"61")}),k===B&&(0,f.jsx)(C.Z,{style:{width:150},options:F,value:s,onChange:function(e){return v(e)},_nk:"".concat(ne,"71")})]}),(0,f.jsx)(P.Z,{className:"table-header-search",layout:"inline",form:l,_nk:"".concat(ne,"81"),children:(0,f.jsxs)(I.Z,{size:[16,16],wrap:!0,_nk:"".concat(ne,"52"),children:[(0,f.jsx)(V.Z,{title:"2020/12/31及以前为年结区间,2021/01/01至2023/05/31为月结查询区间,2023/06/01至2024/06/12为详细查询区间",_nk:"".concat(ne,"91"),children:(0,f.jsx)(X.Z,{style:{transform:"translate(10px, 0px)",cursor:"pointer"},_nk:"".concat(ne,"a1")})}),(0,f.jsx)(P.Z.Item,{label:"查询时间段",_nk:"".concat(ne,"14"),children:(0,f.jsx)(P.Z.Item,{name:"dateTime",noStyle:!0,_nk:"".concat(ne,"15"),children:(0,f.jsx)(J.Z.RangePicker,{placeholder:["开始日期","结束日期"],disabledDate:function(e){return e&&e>$()().endOf("day")},allowClear:!1,_nk:"".concat(ne,"16")})})}),(0,f.jsxs)("div",{className:"search-option",_nk:"".concat(ne,"25"),children:[(0,f.jsx)(W.Z,{type:"default",htmlType:"submit",onClick:oe,className:"search-btn",_nk:"".concat(ne,"b1"),children:"查询"}),(0,f.jsx)(W.Z,{type:"default",htmlType:"button",onClick:function(){l.resetFields(),oe()},className:"search-reset",_nk:"".concat(ne,"b2"),children:"重置"})]})]})})]}),k===B?(0,f.jsx)(N.Z,{columns:ie,dataSource:Y||[],loading:S,total:void 0,expandable:{expandIcon:function(e){var n,t=e.expanded,a=e.onExpand,r=e.record;return null!==(n=r.detail)&&void 0!==n&&n.length?t?(0,f.jsx)("img",{src:G,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(ne,"d1")}):(0,f.jsx)("img",{src:z,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(ne,"d2")}):(0,f.jsx)("div",{className:"tree-emptry-switch",_nk:"".concat(ne,"26")})},defaultExpandedRowKeys:Array(20).fill(void 0).map((function(e,n){return n}))},isShowPagination:!1,getData:re,isfirstRun:!1,paginationMap:{current:"page"},summary:function(){return null!=Y&&Y.length?H.current:null},scroll:{x:"100%",y:ue-185},_nk:"".concat(ne,"c1")},s+k+t):S||null==Y||!Y.length?S?(0,f.jsx)("div",{className:"emptry-box-placeholder",style:{height:"calc(100% - 52px)"},_nk:"".concat(ne,"21"),children:(0,f.jsx)(u.Z,{size:"large",_nk:"".concat(ne,"31")})}):null!=Y&&Y.length?null:(0,f.jsx)("div",{className:"emptry-box-placeholder",style:{height:"calc(100% - 52px)"},_nk:"".concat(ne,"22"),children:(0,f.jsx)(h.Z,{_nk:"".concat(ne,"41")})}):null,(0,f.jsx)("div",{ref:q,style:{display:k===B||S||null==Y||!Y.length?"none":"block"},className:"history-chart",_nk:"".concat(ne,"27")})]})},re="29xp",le=function(e){e.busInfo,e.cancelBusiModal;var n,t,r,l=(0,a.useRef)(),i=(0,a.useRef)(),o=(0,a.useContext)(c.CustomContext),u=o.userInfo,d=o.fundAccId,h=void 0===d?"":d,v=[{width:200,dataIndex:"deadLine",title:"收益日期",render:function(e){return e||""}},{width:200,dataIndex:"fundName",title:"智投组合名称",render:function(e,n){return(0,f.jsx)("div",{style:{paddingLeft:n.deadLine?0:20},_nk:"".concat(re,"11"),children:e||"--"})}},{width:200,dataIndex:"dayIncome",title:"日收益(元）"}],x=u.customerId,p=void 0===x?"":x,y=(0,s.useRequest)(m.Bh,{manual:!0,onSuccess:function(e){var n,t;null===(n=i.current)||void 0===n||n.form.setFieldsValue({superFundCode:null==e||null===(t=e.detail)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.superFundCode})}}),k=y.run,g=y.data,_=(0,s.useRequest)((function(e){var n;return null!==(n=e.executeTimeRange)&&void 0!==n&&n.length?(0,m.Wb)(e):new Promise((function(e){e({code:"0000",data:{detail:[]}})}))}),{manual:!0,onSuccess:function(e){var n,t=null==e||null===(n=e.detail)||void 0===n?void 0:n.map((function(e,n){var t;return b()(b()({},e),{},{key:n+"e.deadLine",fundName:null==g||null===(t=g.detail)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.superFundName,children:e.detail})}));I(b()(b()({},e),{},{detail:t}))}}),A=_.run,w=_.data,j=_.loading,I=_.mutate;(0,a.useEffect)((function(){h&&(k({keyword:h,searchType:"2"}),A({keyword:h,searchType:"2",customerId:p}))}),[h]);var S=null==g||null===(n=g.detail)||void 0===n?void 0:n.map((function(e){return{label:e.superFundName,value:e.superFundCode}})),R=(null===(t=l.current)||void 0===t?void 0:t.offsetHeight)||360;return(0,f.jsxs)("div",{className:"intelligent-box",ref:l,_nk:"".concat(re,"12"),children:[(0,f.jsx)("div",{className:"box-title",_nk:"".concat(re,"13"),children:"智投组合损益"}),null==g||null===(r=g.detail)||void 0===r?void 0:r.map((function(e){return(0,f.jsxs)("div",{className:"box-summary",_nk:"".concat(re,"14"),children:[(0,f.jsxs)("div",{_nk:"".concat(re,"15"),children:[(0,f.jsx)("span",{className:"summary-label",_nk:"".concat(re,"21"),children:"智投组合名称："}),(0,f.jsx)("span",{className:"summary-value",_nk:"".concat(re,"22"),children:e.superFundName})]}),(0,f.jsxs)("div",{_nk:"".concat(re,"16"),children:[(0,f.jsx)("span",{className:"summary-label",_nk:"".concat(re,"23"),children:"收益日期："}),(0,f.jsx)("span",{className:"summary-value",_nk:"".concat(re,"24"),children:e.deadLine})]}),(0,f.jsxs)("div",{_nk:"".concat(re,"17"),children:[(0,f.jsx)("span",{className:"summary-label",_nk:"".concat(re,"25"),children:"昨日收益(元)："}),(0,f.jsx)("span",{className:"summary-value",_nk:"".concat(re,"26"),children:e.dayIncome})]}),(0,f.jsxs)("div",{_nk:"".concat(re,"18"),children:[(0,f.jsx)("span",{className:"summary-label",_nk:"".concat(re,"27"),children:"累计收益(元)："}),(0,f.jsx)("span",{className:"summary-value",_nk:"".concat(re,"28"),children:e.allIncome})]})]},e.superFundCode)})),(0,f.jsx)(N.Z,{ref:i,dataSource:(null==w?void 0:w.detail)||[],columns:v,loading:j,getData:function(e){var n,t,a,r,l=b()(b()({},e),{},{customerId:p,keyword:h,searchType:"2",beginDate:null!==(n=e.executeTimeRange)&&void 0!==n&&n[0]?null===(t=e.executeTimeRange)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.format("YYYY-MM-DD"):void 0,endDate:null!==(a=e.executeTimeRange)&&void 0!==a&&a[1]?null===(r=e.executeTimeRange)||void 0===r||null===(r=r[1])||void 0===r?void 0:r.format("YYYY-MM-DD"):void 0});return A(l)},formChildren:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(P.Z.Item,{label:"组合名称",name:"superFundCode",_nk:"".concat(re,"41"),children:(0,f.jsx)(C.Z,{allowClear:!0,placeholder:"请选择",options:S,_nk:"".concat(re,"51")})}),(0,f.jsx)(P.Z.Item,{label:"查询时间段：",name:"executeTimeRange",_nk:"".concat(re,"42"),children:(0,f.jsx)(J.Z.RangePicker,{placeholder:["开始日期","结束日期"],disabledDate:function(e){return e&&e>$()().endOf("day")},_nk:"".concat(re,"43")})})]}),extra:(0,f.jsx)("div",{className:"box-title",_nk:"".concat(re,"19"),children:"每日收益明细"}),expandable:{expandIcon:function(e){var n,t=e.expanded,a=e.onExpand,r=e.record;return null!==(n=r.detail)&&void 0!==n&&n.length?t?(0,f.jsx)("img",{src:G,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(re,"61")}):(0,f.jsx)("img",{src:z,className:"tree-switch",onClick:function(e){return a(r,e)},_nk:"".concat(re,"62")}):(0,f.jsx)("div",{className:"tree-emptry-switch",_nk:"".concat(re,"1a")})},defaultExpandedRowKeys:Array(20).fill(void 0).map((function(e,n){return n}))},isFirstRun:!1,total:void 0,isShowPagination:!1,paginationMap:{current:"page"},scroll:{x:"100%",y:R-270},footer:function(){return(0,f.jsx)("div",{className:"table-right-summay",dangerouslySetInnerHTML:{__html:"当前日收益总计："+((null==w?void 0:w.summary)||"--")},_nk:"".concat(re,"1b")})},_nk:"".concat(re,"31")},p+h)]})},ie="HgTd",ce=function(e){var n=e.cur,t=e.setCur,u=(0,a.useContext)(c.CustomContext);u.userInfo;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:r,_nk:"".concat(ie,"11"),children:(0,f.jsx)("div",{className:"common-tabtable-style",style:{height:"100%"},_nk:"".concat(ie,"12"),children:(0,f.jsx)(l.Z,{className:"first-tab",tabList:o.cU,current:n,onClick:function(e){t(e)},_nk:"".concat(ie,"21"),children:(0,f.jsxs)("div",{className:"tab-box",_nk:"".concat(ie,"13"),children:["FUND_FENBU"===n&&(0,f.jsx)(i.KeepAlive,{name:"FUND_FENBU",cacheKey:JSON.stringify(u)+"FUND_FENBU",_nk:"".concat(ie,"31"),children:(0,f.jsx)(x,{curTab:n,_nk:"".concat(ie,"41")})}),"ACCOUNT_SEARCH"===n&&(0,f.jsx)(i.KeepAlive,{name:"ACCOUNT_SEARCH",cacheKey:JSON.stringify(u)+"ACCOUNT_SEARCH",_nk:"".concat(ie,"32"),children:(0,f.jsx)(H,{curTab:n,_nk:"".concat(ie,"51")})}),"TIME_DEAL_MSG"===n&&(0,f.jsx)(i.KeepAlive,{name:"TIME_DEAL_MSG",cacheKey:JSON.stringify(u)+"TIME_DEAL_MSG",_nk:"".concat(ie,"33"),children:(0,f.jsx)(ae,{curTab:n,_nk:"".concat(ie,"61")})}),"GEBERAL_SERVICE"===n&&(0,f.jsx)(i.KeepAlive,{name:"GEBERAL_SERVICE",cacheKey:JSON.stringify(u)+"GEBERAL_SERVICE",_nk:"".concat(ie,"34"),children:(0,f.jsx)(le,{curTab:n,_nk:"".concat(ie,"71")})})]})})})})})}}}]);