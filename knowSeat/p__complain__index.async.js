"use strict";(self.webpackChunksub_know_seat=self.webpackChunksub_know_seat||[]).push([[142],{33525:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var n=a(17925),l=a.n(n),s=(a(37762),a(80348),a(8532),a(48493)),i=a(6889),c=a(27778),o=a(62365),r=a(14748),d=a(978),u=a(86114),m=a(57065),f=a.n(m),h="complain___AiHxG",v=a(73287),b=[{text:"投诉",value:"complaint"},{text:"建议",value:"suggestion"}],k=[{text:"待处理",value:"processing"},{text:"已完成",value:"finished"}],x=[{value:"highlySatisfactory",label:"非常满意"},{value:"satisfactory",label:"满意"},{value:"notSatisfactory",label:"不满意"}],p=a(84871),j=a(82405),g=a(22944),_=a(89444),y=a(2344),w=a(50107),Z=(s.Z.RangePicker,r.Z.TextArea),N="q5Hj",S=function(e){var t=(0,d.useRef)(null),a=e.modalOpenDetail,n=e.detailInfo,c=e.modalType,m=e.handleCancel,h=e.refresh,v=(0,d.useState)(),b=l()(v,2),k=b[0],S=b[1],D=(0,d.useState)(),R=l()(D,2),I=R[0],T=R[1],P=(0,d.useState)(""),q=l()(P,2),V=q[0],Y=q[1],M=(0,d.useState)(""),C=l()(M,2),L=C[0],z=C[1],O=(0,d.useState)(""),U=l()(O,2),E=U[0],A=U[1],H=(0,d.useState)(""),F=l()(H,2),G=F[0],B=F[1],X=(0,d.useState)(""),J=l()(X,2),K=J[0],Q=J[1],W=(0,d.useState)(""),$=l()(W,2),ee=$[0],te=$[1],ae=(0,d.useState)(""),ne=l()(ae,2),le=ne[0],se=ne[1],ie=(0,d.useState)(""),ce=l()(ie,2),oe=ce[0],re=ce[1],de=(0,d.useState)(""),ue=l()(de,2),me=ue[0],fe=ue[1],he=(0,d.useState)(""),ve=l()(he,2),be=ve[0],ke=ve[1],xe=(0,d.useState)(""),pe=l()(xe,2),je=pe[0],ge=pe[1],_e=(0,d.useState)(""),ye=l()(_e,2),we=ye[0],Ze=ye[1],Ne=(0,d.useState)(""),Se=l()(Ne,2),De=Se[0],Re=Se[1],Ie=(0,d.useState)(""),Te=l()(Ie,2),Pe=Te[0],qe=Te[1],Ve=(0,d.useState)(""),Ye=l()(Ve,2),Me=Ye[0],Ce=Ye[1],Le=(0,d.useState)(""),ze=l()(Le,2),Oe=ze[0],Ue=ze[1],Ee=(0,d.useState)(""),Ae=l()(Ee,2),He=Ae[0],Fe=Ae[1],Ge=(0,d.useState)(""),Be=l()(Ge,2),Xe=Be[0],Je=Be[1],Ke=(0,d.useState)(""),Qe=l()(Ke,2),We=Qe[0],$e=Qe[1];(0,d.useEffect)((function(){switch($e("deal"!=c),Y(null==n?void 0:n.customerName),z(null==n?void 0:n.fundAccountId),A(null==n?void 0:n.customerAddress),B(null==n?void 0:n.customerPhone),Q(null==n?void 0:n.customerEmail),te(null==n?void 0:n.category),se(null==n?void 0:n.subject),re(null==n?void 0:n.content),fe(null==n?void 0:n.request),ke(null==n?void 0:n.submitUser),ge((0,p.lv)(null==n?void 0:n.submitTime)),Re(f()((0,p.lv)(null==n?void 0:n.requireReplyTime),"YYYY-MM-DD hh:mm:ss")),Ce(null==n?void 0:n.operateResult),Ue(null==n?void 0:n.contentment),Fe(null!=n&&n.operateTime?f()((0,p.lv)(null==n?void 0:n.operateTime),"YYYY-MM-DD hh:mm:ss"):f()((0,p.lv)((new Date).getTime()),"YYYY-MM-DD hh:mm:ss")),Je((new Date).getTime()),null==n?void 0:n.requireReplyMethod){case"sms":qe("短信");break;case"email":qe("邮件");break;case"letter":qe("信函");break;case"phone":qe("电话")}switch(null==n?void 0:n.urgency){case"normal":T(1);break;case"urgent":T(2);break;case"critical":T(3)}switch(null==n?void 0:n.adviceType){case"complaint":S(1);break;case"suggestion":S(2)}1==(null==n?void 0:n.requireReply)?Ze(1):Ze(2)}),[a]);var et=function(){m(!1)},tt=function(e){T(e.target.value)};return(0,w.jsx)("div",{className:"complain-detail",_nk:"".concat(N,"11"),children:(0,w.jsxs)(g.Z,{title:"处理投诉建议",visible:a,onCancel:et,destroyOnClose:!0,width:1090,className:"modal-table-detail complain-detail-modal",footer:null,height:727,_nk:"".concat(N,"21"),children:[(0,w.jsxs)("div",{className:"modal-table-scroll",_nk:"".concat(N,"12"),children:[(0,w.jsxs)("div",{className:"message-info",_nk:"".concat(N,"13"),children:[(0,w.jsx)("div",{className:"title",_nk:"".concat(N,"14"),children:"客户信息"}),(0,w.jsxs)(o.Z,{className:"form-info",layout:"inline",_nk:"".concat(N,"31"),children:[(0,w.jsx)(o.Z.Item,{label:"姓名",name:"customerName",className:"form-info-item",style:{marginLeft:32},rules:[{required:!0}],_nk:"".concat(N,"41"),children:(0,w.jsx)(r.Z,{style:{width:240,borderRadius:8},disabled:!0,defaultValue:V,_nk:"".concat(N,"51")})}),(0,w.jsx)(o.Z.Item,{label:"账号",name:"fundAccountId",className:"form-info-item",style:{marginLeft:20},_nk:"".concat(N,"42"),children:(0,w.jsx)(r.Z,{style:{width:240,borderRadius:8},disabled:!0,defaultValue:L,_nk:"".concat(N,"52")})}),(0,w.jsx)(o.Z.Item,{label:"客户地址",name:"customerAddress",className:"form-info-item",style:{marginLeft:20},_nk:"".concat(N,"43"),children:(0,w.jsx)(Z,{style:{width:240,borderRadius:8},rows:2,autoSize:{minRows:2,maxRows:3},disabled:!0,defaultValue:E,_nk:"".concat(N,"61")})}),(0,w.jsx)(o.Z.Item,{label:"电话",name:"customerPhone",className:"form-info-item",style:{marginLeft:44},_nk:"".concat(N,"44"),children:(0,w.jsx)(r.Z,{style:{width:240,borderRadius:8},disabled:!0,defaultValue:G,_nk:"".concat(N,"53")})}),(0,w.jsx)(o.Z.Item,{label:"邮件",name:"customerEmail",className:"form-info-item",style:{marginLeft:20},_nk:"".concat(N,"45"),children:(0,w.jsx)(r.Z,{style:{width:240,borderRadius:8},disabled:!0,defaultValue:K,_nk:"".concat(N,"54")})})]})]}),(0,w.jsxs)("div",{className:"appeal-info",_nk:"".concat(N,"15"),children:[(0,w.jsxs)("div",{className:"appeal-info-left",_nk:"".concat(N,"16"),children:[(0,w.jsx)("div",{className:"title",_nk:"".concat(N,"17"),children:"客户诉求"}),(0,w.jsxs)("div",{className:"appeal-info-left-content",_nk:"".concat(N,"18"),children:[(0,w.jsxs)("div",{_nk:"".concat(N,"19"),children:[(0,w.jsx)("span",{className:"appeal-info-title",_nk:"".concat(N,"71"),children:"客户诉求："}),(0,w.jsxs)(_.ZP.Group,{defaultValue:k,disabled:!0,_nk:"".concat(N,"46"),children:[(0,w.jsx)(_.ZP,{value:1,_nk:"".concat(N,"81"),children:"投诉"}),(0,w.jsx)(_.ZP,{value:2,_nk:"".concat(N,"82"),children:"建议"})]})]}),(0,w.jsxs)("div",{_nk:"".concat(N,"1a"),children:[(0,w.jsx)("span",{className:"appeal-info-title",_nk:"".concat(N,"72"),children:"紧急程度："}),(0,w.jsxs)(_.ZP.Group,{onChange:tt,defaultValue:I,disabled:!0,_nk:"".concat(N,"47"),children:[(0,w.jsx)(_.ZP,{value:1,_nk:"".concat(N,"83"),children:"一般"}),(0,w.jsx)(_.ZP,{value:2,_nk:"".concat(N,"84"),children:"急"}),(0,w.jsx)(_.ZP,{value:3,_nk:"".concat(N,"85"),children:"紧急"})]})]})]}),(0,w.jsxs)(o.Z,{className:"form-info",_nk:"".concat(N,"32"),children:[(0,w.jsx)(o.Z.Item,{label:"分类",name:"category",className:"form-info-item",style:{marginLeft:32},rules:[{required:!0}],_nk:"".concat(N,"48"),children:(0,w.jsx)(y.Z,{style:{width:584,borderRadius:8},disabled:!0,defaultValue:ee,_nk:"".concat(N,"91")})}),(0,w.jsx)(o.Z.Item,{label:"主题",name:"subject",className:"form-info-item",style:{marginLeft:32},rules:[{required:!0}],_nk:"".concat(N,"49"),children:(0,w.jsx)(Z,{style:{width:584,borderRadius:8},rows:1,autoSize:{minRows:1,maxRows:1},disabled:!0,defaultValue:le,_nk:"".concat(N,"62")})}),(0,w.jsx)(o.Z.Item,{label:"内容",name:"content",className:"form-info-item",style:{marginLeft:32,height:72},rules:[{required:!0}],_nk:"".concat(N,"4a"),children:(0,w.jsx)(Z,{style:{width:584,borderRadius:8},rows:2,autoSize:{minRows:2,maxRows:3},disabled:!0,defaultValue:oe,_nk:"".concat(N,"63")})}),(0,w.jsx)(o.Z.Item,{label:"客户要求",name:"request",className:"form-info-item",style:{marginLeft:16},_nk:"".concat(N,"4b"),children:(0,w.jsx)(Z,{style:{width:584,borderRadius:8},rows:2,autoSize:{minRows:2,maxRows:3},disabled:!0,defaultValue:me,_nk:"".concat(N,"64")})})]})]}),(0,w.jsxs)("div",{className:"appeal-info-right",_nk:"".concat(N,"1b"),children:[(0,w.jsx)("div",{className:"title",_nk:"".concat(N,"1c"),children:"提交信息"}),(0,w.jsxs)(o.Z,{className:"form-info",_nk:"".concat(N,"33"),children:[(0,w.jsx)(o.Z.Item,{label:"提交人",name:"submitUser",className:"form-info-item",style:{marginLeft:58},_nk:"".concat(N,"4c"),children:(0,w.jsx)(r.Z,{style:{width:203,borderRadius:8},defaultValue:be,disabled:!0,_nk:"".concat(N,"55")})}),(0,w.jsx)(o.Z.Item,{label:"提交时间",name:"submitTime",className:"form-info-item",style:{marginLeft:44},_nk:"".concat(N,"4d"),children:(0,w.jsx)(r.Z,{style:{width:203,borderRadius:8},defaultValue:je,disabled:!0,_nk:"".concat(N,"56")})})]}),(0,w.jsxs)("div",{className:"replay",_nk:"".concat(N,"1d"),children:[(0,w.jsx)("span",{className:"appeal-info-title",_nk:"".concat(N,"73"),children:"是否需要回复："}),(0,w.jsxs)(_.ZP.Group,{onChange:tt,defaultValue:we,disabled:!0,_nk:"".concat(N,"4e"),children:[(0,w.jsx)(_.ZP,{value:1,_nk:"".concat(N,"86"),children:"需要"}),(0,w.jsx)(_.ZP,{value:2,_nk:"".concat(N,"87"),children:"不需要"})]})]}),1===we?(0,w.jsxs)(o.Z,{className:"form-info",_nk:"".concat(N,"34"),children:[(0,w.jsx)(o.Z.Item,{label:"回复时间",name:"requireReplyTime",className:"form-info-item",style:{marginLeft:44},_nk:"".concat(N,"4f"),children:(0,w.jsx)(s.Z,{showTime:!0,style:{width:203,borderRadius:8},disabled:!0,defaultValue:De,_nk:"".concat(N,"a1")})}),(0,w.jsx)(o.Z.Item,{label:"回复方式",name:"requireReplyMethod",className:"form-info-item",style:{marginLeft:44},_nk:"".concat(N,"4g"),children:(0,w.jsx)(y.Z,{style:{width:203,borderRadius:8},defaultValue:Pe,disabled:!0,_nk:"".concat(N,"92")})})]}):""]})]}),(0,w.jsxs)("div",{className:"deal-info",_nk:"".concat(N,"1e"),children:[(0,w.jsx)("div",{className:"title",_nk:"".concat(N,"1f"),children:"处理信息"}),(0,w.jsxs)(o.Z,{className:"form-edit",ref:t,initialValues:{operateResult:We?Me:"",contentment:We?Oe:"",operateTime:He},_nk:"".concat(N,"35"),children:[(0,w.jsx)(o.Z.Item,{label:"处理结果",name:"operateResult",className:"form-info-item",style:{marginLeft:12,height:84},rules:[{required:!0,max:1e3}],_nk:"".concat(N,"4h"),children:(0,w.jsx)(Z,{style:{width:920,borderRadius:8},rows:3,autoSize:{minRows:3,maxRows:3},defaultValue:Me,value:Me,disabled:We,onChange:function(e){Ce(e.target.value),e.target.value.length>1e3&&j.ZP.error("文字不超过1000字")},_nk:"".concat(N,"65")})}),(0,w.jsx)(o.Z.Item,{label:"满意度",name:"contentment",className:"form-info-item",style:{marginLeft:26},rules:[{required:!0,message:"请选择满意度"}],_nk:"".concat(N,"4i"),children:(0,w.jsx)(y.Z,{style:{width:240,borderRadius:8},defaultValue:"",disabled:We,value:Oe,options:x,onChange:function(e){Ue(e)},_nk:"".concat(N,"93")})}),(0,w.jsx)(o.Z.Item,{label:"处理时间",name:"operateTime",className:"form-info-item",style:{marginLeft:12},rules:[{required:!0,message:"请选择处理时间"}],_nk:"".concat(N,"4j"),children:(0,w.jsx)(s.Z,{style:{borderRadius:8},showTime:!0,onChange:function(e,t){Fe(f()(t,"YYYY-MM-DD hh:mm:ss")),Je(new Date(t).getTime())},disabled:We,defaultValue:He,_nk:"".concat(N,"a2")})})]})]})]}),We?"":(0,w.jsxs)("div",{className:"footer",style:{paddingRight:24},_nk:"".concat(N,"1g"),children:[(0,w.jsx)(i.Z,{className:"ghost-btn",onClick:et,_nk:"".concat(N,"b1"),children:"取消"}),(0,w.jsx)(i.Z,{className:"submit-btn",type:"primary",onClick:function(){var e;"deal"==c?null==t||null===(e=t.current)||void 0===e||e.validateFields().then((function(){var e={adviceId:null==n?void 0:n.adviceId,operateResult:Me,contentment:Oe,operateTime:Xe};(0,u.es)(e).then((function(e){"0000"==(null==e?void 0:e.code)?(j.ZP.success("处理成功"),m(!1),h(!0)):j.ZP.error(null==e?void 0:e.message)})).catch((function(){j.ZP.error("服务异常")}))})):m(!1)},_nk:"".concat(N,"b2"),children:"提交"})]})]})})},D=s.Z.RangePicker,R="2NRM",I=function(){var e,t,a=(0,d.useRef)(),n=(0,d.useRef)(null),s=(0,d.useState)([]),m=l()(s,2),x=m[0],j=m[1],g=(0,d.useState)(),_=l()(g,2),y=_[0],Z=_[1],N=(0,d.useState)(),I=l()(N,2),T=I[0],P=I[1],q=(0,d.useState)(!1),V=l()(q,2),Y=V[0],M=V[1],C=(0,d.useState)(""),L=l()(C,2),z=L[0],O=L[1],U=(0,d.useState)(""),E=l()(U,2),A=E[0],H=E[1],F=(0,d.useState)(""),G=l()(F,2),B=G[0],X=G[1],J=(0,d.useState)(!1),K=l()(J,2),Q=K[0],W=K[1],$=[{dataIndex:"adviceType",key:"adviceType",title:"类型",width:50,filters:b,sorter:!1,filterMultiple:!1,render:function(e,t){return(0,w.jsx)("div",{_nk:"".concat(R,"11"),children:"complaint"==e?"投诉":"建议"})}},{dataIndex:"category",title:"分类",width:50,key:"category",filters:T,sorter:!1,filterMultiple:!0},{dataIndex:"customerName",title:"客户姓名",key:"customerName",width:60},{dataIndex:"customerPhone",title:"客户电话",key:"customerPhone",width:80},{dataIndex:"subject",title:"主题",key:"subject",width:280},{dataIndex:"submitTime",title:"提交时间",key:"submitTime",width:80,render:function(e){return(0,w.jsx)("div",{_nk:"".concat(R,"12"),children:(0,p.rr)(e)})}},{dataIndex:"status",title:"状态",key:"status",filterMultiple:!1,filters:k,width:60,render:function(e,t){return(0,w.jsx)("div",{className:"notSubmitted"==e?"red-color":"processing"==e?"blue-color":"green-color",_nk:"".concat(R,"13"),children:"notSubmitted"==e?"未提交":"processing"==e?"待处理":"已完成"})}},{dataIndex:"submitUser",key:"submitUser",title:"提交人",width:60},{dataIndex:"operator",key:"operator",title:"处理人",width:60},{dataIndex:"operateTime",key:"operateTime",title:"处理时间",width:100,render:function(e){return(0,w.jsx)("div",{_nk:"".concat(R,"14"),children:0!=e?(0,p.lv)(e):"-"})}},{dataIndex:"option",title:"操作",fixed:"right",width:50,render:function(e,t){return(0,w.jsx)("div",{className:"table-btns",_nk:"".concat(R,"15"),children:"processing"==(null==t?void 0:t.status)?(0,w.jsx)(i.Z,{type:"link",onClick:function(){return te(t,"deal")},_nk:"".concat(R,"21"),children:"处理"}):(0,w.jsx)(i.Z,{type:"link",onClick:function(){return te(t,"view")},_nk:"".concat(R,"22"),children:"查看"})})}}];(0,d.useEffect)((function(){ee({startSubmitDate:"",endSubmitDate:"",subject:"",submitUser:"",operator:"",categories:[],adviceType:"",status:"",customerName:"",page:0,pageSize:10}),(0,u.bd)().then((function(e){var t,a=[];null==e||null===(t=e.data)||void 0===t||t.forEach((function(e){var t={value:e,text:e};a.push(t)})),P(a)})).catch((function(e){}))}),[]);var ee=function(e){M(!0),(0,u.aq)(e).then((function(e){var t,a;M(!1),j(null==e||null===(t=e.data)||void 0===t?void 0:t.list),Z(null==e||null===(a=e.data)||void 0===a?void 0:a.count)})).catch((function(){M(!1)}))},te=function(e,t){O(!0),H(e),X(t)};(0,d.useEffect)((function(){if(1==Q){ee({startSubmitDate:"",endSubmitDate:"",subject:"",submitUser:"",operator:"",categories:[],adviceType:"",status:"",customerName:"",page:0,pageSize:10}),W(!1)}}),[Q]);var ae=(null===(e=n.current)||void 0===e?void 0:e.offsetHeight)||360,ne=null===(t=n.current)||void 0===t?void 0:t.querySelector(".table-header-box"),le=null!=ne&&ne.offsetHeight?(null==ne?void 0:ne.offsetHeight)+68:0;return(0,w.jsxs)(c.ZP,{autoInsertSpaceInButton:!1,_nk:"".concat(R,"31"),children:[(0,w.jsx)("div",{ref:n,className:h,_nk:"".concat(R,"16"),children:(0,w.jsx)(v.Z,{ref:a,columns:$,total:y||0,dataSource:x||[],getData:function(e){var t="",a="",n="",l="",s="",i="";null!=e&&e.confirmDate&&(t=new Date(f()(e.confirmDate[0]).valueOf()).getFullYear(),a=("0"+(new Date(f()(e.confirmDate[0]).valueOf()).getMonth()+1)).slice(-2),n=("0"+new Date(f()(e.confirmDate[0]).valueOf()).getDate()).slice(-2)),e.confirmDate&&(l=new Date(f()(e.confirmDate[1]).valueOf()).getFullYear(),s=("0"+(new Date(f()(e.confirmDate[1]).valueOf()).getMonth()+1)).slice(-2),i=("0"+new Date(f()(e.confirmDate[1]).valueOf()).getDate()).slice(-2));var c={startSubmitDate:e.confirmDate?null!=e.confirmDate[0]?t+"-"+a+"-"+n:"":void 0,endSubmitDate:e.confirmDate?null!=e.confirmDate[1]?l+"-"+s+"-"+i:"":void 0,subject:(null==e?void 0:e.subject)||"",submitUser:(null==e?void 0:e.submitUser)||"",operator:(null==e?void 0:e.operator)||"",categories:(null==e?void 0:e.category)||[],adviceType:(null==e?void 0:e.adviceType)||"",status:(null==e?void 0:e.status)||"",customerName:(null==e?void 0:e.customerName)||"",customerPhone:(null==e?void 0:e.customerPhone)||"",page:(null==e?void 0:e.pageNum)-1||0,pageSize:(null==e?void 0:e.pageSize)||10};ee(c)},loading:Y,scroll:{x:1500,y:ae-le-136},formChildren:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z.Item,{label:"提交时间",name:"confirmDate",_nk:"".concat(R,"51"),children:(0,w.jsx)(D,{style:{width:240,height:28},disabledDate:function(e){return e&&e>f()().endOf("day")},allowEmpty:[!0,!0],_nk:"".concat(R,"61")})}),(0,w.jsx)(o.Z.Item,{label:"主题",name:"subject",_nk:"".concat(R,"52"),children:(0,w.jsx)(r.Z,{placeholder:"请输入",style:{width:240,height:28},_nk:"".concat(R,"71")})}),(0,w.jsx)(o.Z.Item,{label:"处理人",name:"operator",_nk:"".concat(R,"53"),children:(0,w.jsx)(r.Z,{placeholder:"请输入",style:{width:240,height:28},_nk:"".concat(R,"72")})}),(0,w.jsx)(o.Z.Item,{label:"提交人",name:"submitUser",_nk:"".concat(R,"54"),children:(0,w.jsx)(r.Z,{placeholder:"请输入",style:{width:240,height:28},_nk:"".concat(R,"73")})}),(0,w.jsx)(o.Z.Item,{label:"客户姓名",name:"customerName",_nk:"".concat(R,"55"),children:(0,w.jsx)(r.Z,{placeholder:"请输入",style:{width:240,height:28},_nk:"".concat(R,"74")})}),(0,w.jsx)(o.Z.Item,{label:"客户电话",name:"customerPhone",_nk:"".concat(R,"56"),children:(0,w.jsx)(r.Z,{placeholder:"请输入",style:{width:240,height:28},_nk:"".concat(R,"75")})})]}),paginationMap:{current:"pageNum"},_nk:"".concat(R,"41")})}),(0,w.jsx)(S,{modalOpenDetail:z,detailInfo:A,modalType:B,handleCancel:function(e){O(e)},refresh:function(e){var t;null===(t=a.current)||void 0===t||t.setPaginationParams({current:1,pageSize:10}),W(e)},_nk:"".concat(R,"81")})]})}},86114:function(e,t,a){a.d(t,{TV:function(){return r},Xc:function(){return d},aq:function(){return i},bd:function(){return c},es:function(){return o}});var n=a(35118),l=a.n(n),s=a(92938);function i(e){return(0,s.request)("/rest/csibs/advice/list",{method:"post",data:e})}function c(){return(0,s.request)("/rest/csibs/advice/categories",{method:"post"})}function o(e){return(0,s.request)("/rest/csibs/advice/operate",{method:"post",data:e})}function r(e){return(0,s.request)("/rest/csibs/account/batch-registered",{method:"post",data:l()(l()({},e),{},{page:e.page-1})})}function d(e){return(0,s.request)("/rest/csibs/bill/subscription-list",{method:"post",data:l()(l()({},e),{},{page:e.page-1})})}}}]);